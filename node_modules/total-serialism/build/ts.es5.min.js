"use strict";function _toConsumableArray(arr){return _arrayWithoutHoles(arr)||_iterableToArray(arr)||_unsupportedIterableToArray(arr)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(n);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _iterableToArray(iter){if(typeof Symbol!=="undefined"&&Symbol.iterator in Object(iter))return Array.from(iter)}function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);if(enumerableOnly)symbols=symbols.filter(function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable});keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=arguments[i]!=null?arguments[i]:{};if(i%2){ownKeys(Object(source),true).forEach(function(key){_defineProperty(target,key,source[key])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(target,Object.getOwnPropertyDescriptors(source))}else{ownKeys(Object(source)).forEach(function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))})}}return target}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true})}else{obj[key]=value}return obj}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(f){if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.TotalSerialism=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++){o(t[i])}return o}return r}()({1:[function(require,module,exports){module.exports={chromatic:[0,1,2,3,4,5,6,7,8,9,10,11],major:[0,0,2,2,4,5,5,7,7,9,9,11],minor:[0,0,2,3,3,5,7,7,8,8,10,10],minor_melodic:[0,0,2,3,3,5,7,7,9,9,11,11],minor_harmonic:[0,0,2,3,3,5,7,7,8,8,11,11],dorian:[0,0,2,3,3,5,5,7,7,9,10,10],phrygian:[0,1,1,3,3,5,7,7,8,8,10,10],lydian:[0,0,2,4,4,6,6,7,7,9,11,11],myxolydian:[0,0,2,4,4,5,5,7,7,9,10,10],locrian:[0,1,1,3,3,5,6,6,8,8,10,10],hungarian:[0,0,2,3,3,6,6,7,8,8,11,11],gypsy:[0,1,1,4,4,5,5,7,8,8,11,11],major_neapolitan:[0,1,1,3,3,5,7,7,8,8,11,11],minor_neapolitan:[0,1,1,3,3,5,7,7,9,9,11,11],hexatonic:[0,0,2,2,4,4,6,6,8,8,10,10],hexatonic_blues:[0,0,2,2,4,4,6,6,7,7,10,10],hexatonic_prometheus:[0,0,2,2,4,4,6,6,9,9,10,10],major_pentatonic:[0,0,2,2,4,4,7,7,7,9,9,9],minor_pentatonic:[0,0,3,3,3,5,5,7,7,10,10,10]}},{}],2:[function(require,module,exports){module.exports={c:0,cbb:10,cb:11,"c#":1,"c##":2,cx:2,d:2,dbb:0,db:1,"d#":3,"d##":4,dx:4,e:4,ebb:2,eb:3,"e#":5,"e##":6,ex:6,f:5,fbb:3,fb:4,"f#":6,"f##":7,fx:7,g:7,gbb:5,gb:6,"g#":8,"g##":9,gx:9,a:9,abb:7,ab:8,"a#":10,"a##":11,ax:11,b:11,bbb:9,bb:10,"b#":0,"b##":1,bx:1,C:0,Cbb:10,Cb:11,"C#":1,"C##":2,Cx:2,D:2,Dbb:0,Db:1,"D#":3,"D##":4,Dx:4,E:4,Ebb:2,Eb:3,"E#":5,"E##":6,Ex:6,F:5,Fbb:3,Fb:4,"F#":6,"F##":7,Fx:7,G:7,Gbb:5,Gb:6,"G#":8,"G##":9,Gx:9,A:9,Abb:7,Ab:8,"A#":10,"A##":11,Ax:11,B:11,Bbb:9,Bb:10,"B#":0,"B##":1,Bx:1}},{}],3:[function(require,module,exports){var Generative=require("./src/gen-basic.js");var Algorithmic=require("./src/gen-complex.js");var Stochastic=require("./src/gen-stochastic.js");var Transform=require("./src/transform.js");var Statistic=require("./src/statistic.js");var Translate=require("./src/translate.js");var Utility=require("./src/utility.js");exports.Generative=Generative;exports.Algorithmic=Algorithmic;exports.Stochastic=Stochastic;exports.Transform=Transform;exports.Statistic=Statistic;exports.Translate=Translate;exports.Utility=Utility;exports.getSettings=Translate.getSettings;exports.setTempo=Translate.setTempo;exports.getTempo=Translate.getTempo;exports.setBPM=Translate.setTempo;exports.getBPM=Translate.getTempo;exports.setScale=Translate.setScale;exports.getScale=Translate.getScale;exports.setRoot=Translate.setRoot;exports.getRoot=Translate.getRoot},{"./src/gen-basic.js":34,"./src/gen-complex.js":35,"./src/gen-stochastic.js":36,"./src/statistic.js":37,"./src/transform.js":38,"./src/translate.js":39,"./src/utility.js":40}],4:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core"],factory):(global=global||self,factory(global.AbcNotation={},global.core))})(this,function(exports,core){"use strict";var fillStr=function fillStr(character,times){return Array(times+1).join(character)};var REGEX=/^(_{1,}|=|\^{1,}|)([abcdefgABCDEFG])([,']*)$/;function tokenize(str){var m=REGEX.exec(str);if(!m){return["","",""]}return[m[1],m[2],m[3]]}function abcToScientificNotation(str){var _a=tokenize(str),acc=_a[0],letter=_a[1],oct=_a[2];if(letter===""){return""}var o=4;for(var i=0;i<oct.length;i++){o+=oct.charAt(i)===","?-1:1}var a=acc[0]==="_"?acc.replace(/_/g,"b"):acc[0]==="^"?acc.replace(/\^/g,"#"):"";return letter.charCodeAt(0)>96?letter.toUpperCase()+a+(o+1):letter+a+o}function scientificToAbcNotation(str){var n=core.note(str);if(n.empty||!n.oct){return""}var letter=n.letter,acc=n.acc,oct=n.oct;var a=acc[0]==="b"?acc.replace(/b/g,"_"):acc.replace(/#/g,"^");var l=oct>4?letter.toLowerCase():letter;var o=oct===5?"":oct>4?fillStr("'",oct-5):fillStr(",",4-oct);return a+l+o}function transpose(note,interval){return scientificToAbcNotation(core.transpose(abcToScientificNotation(note),interval))}function distance(from,to){return core.distance(abcToScientificNotation(from),abcToScientificNotation(to))}var index={abcToScientificNotation:abcToScientificNotation,scientificToAbcNotation:scientificToAbcNotation,tokenize:tokenize,transpose:transpose,distance:distance};exports.abcToScientificNotation=abcToScientificNotation;exports["default"]=index;exports.distance=distance;exports.scientificToAbcNotation=scientificToAbcNotation;exports.tokenize=tokenize;exports.transpose=transpose;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10}],5:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core"],factory):(global=global||self,factory(global.Array={},global.core))})(this,function(exports,core){"use strict";function ascR(b,n){var a=[];for(;n--;a[n]=n+b){}return a}function descR(b,n){var a=[];for(;n--;a[n]=b-n){}return a}function range(from,to){return from<to?ascR(from,to-from+1):descR(from,from-to+1)}function rotate(times,arr){var len=arr.length;var n=(times%len+len)%len;return arr.slice(n,len).concat(arr.slice(0,n))}function compact(arr){return arr.filter(function(n){return n===0||n})}function sortedNoteNames(notes){var valid=notes.map(function(n){return core.note(n)}).filter(function(n){return!n.empty});return valid.sort(function(a,b){return a.height-b.height}).map(function(n){return n.name})}function sortedUniqNoteNames(arr){return sortedNoteNames(arr).filter(function(n,i,a){return i===0||n!==a[i-1]})}function shuffle(arr,rnd){if(rnd===void 0){rnd=Math.random}var i;var t;var m=arr.length;while(m){i=Math.floor(rnd()*m--);t=arr[m];arr[m]=arr[i];arr[i]=t}return arr}function permutations(arr){if(arr.length===0){return[[]]}return permutations(arr.slice(1)).reduce(function(acc,perm){return acc.concat(arr.map(function(e,pos){var newPerm=perm.slice();newPerm.splice(pos,0,arr[0]);return newPerm}))},[])}exports.compact=compact;exports.permutations=permutations;exports.range=range;exports.rotate=rotate;exports.shuffle=shuffle;exports.sortedNoteNames=sortedNoteNames;exports.sortedUniqNoteNames=sortedUniqNoteNames;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10}],6:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/chord-type"),require("@tonaljs/core"),require("@tonaljs/pcset")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/chord-type","@tonaljs/core","@tonaljs/pcset"],factory):(global=global||self,factory(global.ChordDetect={},global.chordType,global.core,global.pcset))})(this,function(exports,chordType,core,pcset){"use strict";var NotFound={weight:0,name:""};var namedSet=function namedSet(notes){var pcToName=notes.reduce(function(record,n){var chroma=core.note(n).chroma;if(chroma!==undefined){record[chroma]=record[chroma]||core.note(n).name}return record},{});return function(chroma){return pcToName[chroma]}};function detect(source){var notes=source.map(function(n){return core.note(n).pc}).filter(function(x){return x});if(core.note.length===0){return[]}var found=findExactMatches(notes,1);return found.filter(function(chord){return chord.weight}).sort(function(a,b){return b.weight-a.weight}).map(function(chord){return chord.name})}function findExactMatches(notes,weight){var tonic=notes[0];var tonicChroma=core.note(tonic).chroma;var noteName=namedSet(notes);var allModes=pcset.modes(notes,false);var found=allModes.map(function(mode,chroma){var chordName=chordType.get(mode).aliases[0];if(!chordName){return NotFound}var baseNote=noteName(chroma);var isInversion=chroma!==tonicChroma;if(isInversion){return{weight:.5*weight,name:""+baseNote+chordName+"/"+tonic}}else{return{weight:1*weight,name:""+baseNote+chordName}}});return found}var index={detect:detect};exports["default"]=index;exports.detect=detect;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/chord-type":7,"@tonaljs/core":10,"@tonaljs/pcset":17}],7:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core"),require("@tonaljs/pcset")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core","@tonaljs/pcset"],factory):(global=global||self,factory(global.ChordType={},global.core,global.pcset))})(this,function(exports,core,pcset){"use strict";var _assign=function __assign(){_assign=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign.apply(this,arguments)};var CHORDS=[["1P 3M 5P","major","M "],["1P 3M 5P 7M","major seventh","maj7 Δ ma7 M7 Maj7"],["1P 3M 5P 7M 9M","major ninth","maj9 Δ9"],["1P 3M 5P 7M 9M 13M","major thirteenth","maj13 Maj13"],["1P 3M 5P 6M","sixth","6 add6 add13 M6"],["1P 3M 5P 6M 9M","sixth/ninth","6/9 69"],["1P 3M 5P 7M 11A","lydian","maj#4 Δ#4 Δ#11"],["1P 3M 6m 7M","major seventh b6","M7b6"],["1P 3m 5P","minor","m min -"],["1P 3m 5P 7m","minor seventh","m7 min7 mi7 -7"],["1P 3m 5P 7M","minor/major seventh","m/ma7 m/maj7 mM7 m/M7 -Δ7 mΔ"],["1P 3m 5P 6M","minor sixth","m6"],["1P 3m 5P 7m 9M","minor ninth","m9"],["1P 3m 5P 7m 9M 11P","minor eleventh","m11"],["1P 3m 5P 7m 9M 13M","minor thirteenth","m13"],["1P 3m 5d","diminished","dim ° o"],["1P 3m 5d 7d","diminished seventh","dim7 °7 o7"],["1P 3m 5d 7m","half-diminished","m7b5 ø"],["1P 3M 5P 7m","dominant seventh","7 dom"],["1P 3M 5P 7m 9M","dominant ninth","9"],["1P 3M 5P 7m 9M 13M","dominant thirteenth","13"],["1P 3M 5P 7m 11A","lydian dominant seventh","7#11 7#4"],["1P 3M 5P 7m 9m","dominant b9","7b9"],["1P 3M 5P 7m 9A","dominant #9","7#9"],["1P 3M 7m 9m","altered","alt7"],["1P 4P 5P","suspended 4th","sus4"],["1P 2M 5P","suspended 2nd","sus2"],["1P 4P 5P 7m","suspended 4th seventh","7sus4"],["1P 5P 7m 9M 11P","eleventh","11"],["1P 4P 5P 7m 9m","suspended 4th b9","b9sus phryg"],["1P 5P","fifth","5"],["1P 3M 5A","augmented","aug + +5"],["1P 3M 5A 7M","augmented seventh","maj7#5 maj7+5"],["1P 3M 5P 7M 9M 11A","major #11 (lydian)","maj9#11 Δ9#11"],["1P 2M 4P 5P","","sus24 sus4add9"],["1P 3M 13m","","Mb6"],["1P 3M 5A 7M 9M","","maj9#5 Maj9#5"],["1P 3M 5A 7m","","7#5 +7 7aug aug7"],["1P 3M 5A 7m 9A","","7#5#9 7alt"],["1P 3M 5A 7m 9M","","9#5 9+"],["1P 3M 5A 7m 9M 11A","","9#5#11"],["1P 3M 5A 7m 9m","","7#5b9"],["1P 3M 5A 7m 9m 11A","","7#5b9#11"],["1P 3M 5A 9A","","+add#9"],["1P 3M 5A 9M","","M#5add9 +add9"],["1P 3M 5P 6M 11A","","M6#11 M6b5 6#11 6b5"],["1P 3M 5P 6M 7M 9M","","M7add13"],["1P 3M 5P 6M 9M 11A","","69#11"],["1P 3M 5P 6m 7m","","7b6"],["1P 3M 5P 7M 9A 11A","","maj7#9#11"],["1P 3M 5P 7M 9M 11A 13M","","M13#11 maj13#11 M13+4 M13#4"],["1P 3M 5P 7M 9m","","M7b9"],["1P 3M 5P 7m 11A 13m","","7#11b13 7b5b13"],["1P 3M 5P 7m 13M","","7add6 67 7add13"],["1P 3M 5P 7m 9A 11A","","7#9#11 7b5#9"],["1P 3M 5P 7m 9A 11A 13M","","13#9#11"],["1P 3M 5P 7m 9A 11A 13m","","7#9#11b13"],["1P 3M 5P 7m 9A 13M","","13#9"],["1P 3M 5P 7m 9A 13m","","7#9b13"],["1P 3M 5P 7m 9M 11A","","9#11 9+4 9#4"],["1P 3M 5P 7m 9M 11A 13M","","13#11 13+4 13#4"],["1P 3M 5P 7m 9M 11A 13m","","9#11b13 9b5b13"],["1P 3M 5P 7m 9m 11A","","7b9#11 7b5b9"],["1P 3M 5P 7m 9m 11A 13M","","13b9#11"],["1P 3M 5P 7m 9m 11A 13m","","7b9b13#11 7b9#11b13 7b5b9b13"],["1P 3M 5P 7m 9m 13M","","13b9"],["1P 3M 5P 7m 9m 13m","","7b9b13"],["1P 3M 5P 7m 9m 9A","","7b9#9"],["1P 3M 5P 9M","","Madd9 2 add9 add2"],["1P 3M 5P 9m","","Maddb9"],["1P 3M 5d","","Mb5"],["1P 3M 5d 6M 7m 9M","","13b5"],["1P 3M 5d 7M","","M7b5"],["1P 3M 5d 7M 9M","","M9b5"],["1P 3M 5d 7m","","7b5"],["1P 3M 5d 7m 9M","","9b5"],["1P 3M 7m","","7no5"],["1P 3M 7m 13m","","7b13"],["1P 3M 7m 9M","","9no5"],["1P 3M 7m 9M 13M","","13no5"],["1P 3M 7m 9M 13m","","9b13"],["1P 3m 4P 5P","","madd4"],["1P 3m 5A","","m#5 m+ mb6"],["1P 3m 5P 6M 9M","","m69"],["1P 3m 5P 6m 7M","","mMaj7b6"],["1P 3m 5P 6m 7M 9M","","mMaj9b6"],["1P 3m 5P 7M 9M","","mMaj9"],["1P 3m 5P 7m 11P","","m7add11 m7add4"],["1P 3m 5P 9M","","madd9"],["1P 3m 5d 6M 7M","","o7M7"],["1P 3m 5d 7M","","oM7"],["1P 3m 6m 7M","","mb6M7"],["1P 3m 6m 7m","","m7#5"],["1P 3m 6m 7m 9M","","m9#5"],["1P 3m 6m 7m 9M 11P","","m11A"],["1P 3m 6m 9m","","mb6b9"],["1P 3m 7m 12d 2M","","m9b5 h9"],["1P 3m 7m 12d 2M 4P","","m11b5 h11"],["1P 4P 5A 7M","","M7#5sus4"],["1P 4P 5A 7M 9M","","M9#5sus4"],["1P 4P 5A 7m","","7#5sus4"],["1P 4P 5P 7M","","M7sus4"],["1P 4P 5P 7M 9M","","M9sus4"],["1P 4P 5P 7m 9M","","9sus4 9sus"],["1P 4P 5P 7m 9M 13M","","13sus4 13sus"],["1P 4P 5P 7m 9m 13m","","7sus4b9b13 7b9b13sus4"],["1P 4P 7m 10m","","4 quartal"],["1P 5P 7m 9m 11P","","11b9"]];var NoChordType=_assign(_assign({},pcset.EmptyPcset),{name:"",quality:"Unknown",intervals:[],aliases:[]});var dictionary=[];var index={};function get(type){return index[type]||NoChordType}var chordType=core.deprecate("ChordType.chordType","ChordType.get",get);function names(){return dictionary.map(function(chord){return chord.name}).filter(function(x){return x})}function symbols(){return dictionary.map(function(chord){return chord.aliases[0]}).filter(function(x){return x})}function keys(){return Object.keys(index)}function all(){return dictionary.slice()}var entries=core.deprecate("ChordType.entries","ChordType.all",all);function removeAll(){dictionary=[];index={}}function add(intervals,aliases,fullName){var quality=getQuality(intervals);var chord=_assign(_assign({},pcset.get(intervals)),{name:fullName||"",quality:quality,intervals:intervals,aliases:aliases});dictionary.push(chord);if(chord.name){index[chord.name]=chord}index[chord.setNum]=chord;index[chord.chroma]=chord;chord.aliases.forEach(function(alias){return addAlias(chord,alias)})}function addAlias(chord,alias){index[alias]=chord}function getQuality(intervals){var has=function has(interval){return intervals.indexOf(interval)!==-1};return has("5A")?"Augmented":has("3M")?"Major":has("5d")?"Diminished":has("3m")?"Minor":"Unknown"}CHORDS.forEach(function(_a){var ivls=_a[0],fullName=_a[1],names=_a[2];return add(ivls.split(" "),names.split(" "),fullName)});dictionary.sort(function(a,b){return a.setNum-b.setNum});var index$1={names:names,symbols:symbols,get:get,all:all,add:add,removeAll:removeAll,keys:keys,entries:entries,chordType:chordType};exports.add=add;exports.addAlias=addAlias;exports.all=all;exports.chordType=chordType;exports["default"]=index$1;exports.entries=entries;exports.get=get;exports.keys=keys;exports.names=names;exports.removeAll=removeAll;exports.symbols=symbols;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10,"@tonaljs/pcset":17}],8:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/chord-detect"),require("@tonaljs/chord-type"),require("@tonaljs/core"),require("@tonaljs/pcset"),require("@tonaljs/scale-type")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/chord-detect","@tonaljs/chord-type","@tonaljs/core","@tonaljs/pcset","@tonaljs/scale-type"],factory):(global=global||self,factory(global.Chord={},global.chordDetect,global.chordType,global.core,global.pcset,global.scaleType))})(this,function(exports,chordDetect,chordType,core,pcset,scaleType){"use strict";var _assign2=function __assign(){_assign2=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign2.apply(this,arguments)};var NoChord={empty:true,name:"",type:"",tonic:null,setNum:NaN,quality:"Unknown",chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};var NUM_TYPES=/^(6|64|7|9|11|13)$/;function tokenize(name){var _a=core.tokenizeNote(name),letter=_a[0],acc=_a[1],oct=_a[2],type=_a[3];if(letter===""){return["",name]}if(letter==="A"&&type==="ug"){return["","aug"]}if(!type&&(oct==="4"||oct==="5")){return[letter+acc,oct]}if(NUM_TYPES.test(oct)){return[letter+acc,oct+type]}else{return[letter+acc+oct,type]}}function get(src){var _a=findChord(src),type=_a.type,tonic=_a.tonic;if(!type||type.empty){return NoChord}var notes=tonic?type.intervals.map(function(i){return core.transpose(tonic,i)}):[];var name=tonic?tonic+" "+type.name:type.name;return _assign2(_assign2({},type),{name:name,type:type.name,tonic:tonic||"",notes:notes})}var chord=core.deprecate("Chord.chord","Chord.get",get);function findChord(src){if(!src||!src.length){return{}}var tokens=Array.isArray(src)?src:tokenize(src);var tonic=core.note(tokens[0]).name;var type=chordType.get(tokens[1]);if(!type.empty){return{tonic:tonic,type:type}}else if(tonic&&typeof src==="string"){return{tonic:"",type:chordType.get(src)}}else{return{}}}function transpose(chordName,interval){var _a=tokenize(chordName),tonic=_a[0],type=_a[1];if(!tonic){return name}return core.transpose(tonic,interval)+type}function chordScales(name){var s=get(name);var isChordIncluded=pcset.isSupersetOf(s.chroma);return scaleType.all().filter(function(scale){return isChordIncluded(scale.chroma)}).map(function(scale){return scale.name})}function extended(chordName){var s=get(chordName);var isSuperset=pcset.isSupersetOf(s.chroma);return chordType.all().filter(function(chord){return isSuperset(chord.chroma)}).map(function(chord){return s.tonic+chord.aliases[0]})}function reduced(chordName){var s=get(chordName);var isSubset=pcset.isSubsetOf(s.chroma);return chordType.all().filter(function(chord){return isSubset(chord.chroma)}).map(function(chord){return s.tonic+chord.aliases[0]})}var index={get:get,detect:chordDetect.detect,chordScales:chordScales,extended:extended,reduced:reduced,tokenize:tokenize,transpose:transpose,chord:chord};Object.defineProperty(exports,"detect",{enumerable:true,get:function get(){return chordDetect.detect}});exports.chord=chord;exports.chordScales=chordScales;exports["default"]=index;exports.extended=extended;exports.get=get;exports.reduced=reduced;exports.tokenize=tokenize;exports.transpose=transpose;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/chord-detect":6,"@tonaljs/chord-type":7,"@tonaljs/core":10,"@tonaljs/pcset":17,"@tonaljs/scale-type":21}],9:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.Collection={}))})(this,function(exports){"use strict";function ascR(b,n){var a=[];for(;n--;a[n]=n+b){}return a}function descR(b,n){var a=[];for(;n--;a[n]=b-n){}return a}function range(from,to){return from<to?ascR(from,to-from+1):descR(from,from-to+1)}function rotate(times,arr){var len=arr.length;var n=(times%len+len)%len;return arr.slice(n,len).concat(arr.slice(0,n))}function compact(arr){return arr.filter(function(n){return n===0||n})}function shuffle(arr,rnd){if(rnd===void 0){rnd=Math.random}var i;var t;var m=arr.length;while(m){i=Math.floor(rnd()*m--);t=arr[m];arr[m]=arr[i];arr[i]=t}return arr}function permutations(arr){if(arr.length===0){return[[]]}return permutations(arr.slice(1)).reduce(function(acc,perm){return acc.concat(arr.map(function(e,pos){var newPerm=perm.slice();newPerm.splice(pos,0,arr[0]);return newPerm}))},[])}var index={compact:compact,permutations:permutations,range:range,rotate:rotate,shuffle:shuffle};exports.compact=compact;exports["default"]=index;exports.permutations=permutations;exports.range=range;exports.rotate=rotate;exports.shuffle=shuffle;Object.defineProperty(exports,"__esModule",{value:true})})},{}],10:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.Core={}))})(this,function(exports){"use strict";var fillStr=function fillStr(s,n){return Array(Math.abs(n)+1).join(s)};function deprecate(original,alternative,fn){return function(){var args=[];for(var _i=0;_i<arguments.length;_i++){args[_i]=arguments[_i]}console.warn(original+" is deprecated. Use "+alternative+".");return fn.apply(this,args)}}function isNamed(src){return src!==null&&_typeof(src)==="object"&&typeof src.name==="string"?true:false}function isPitch(pitch){return pitch!==null&&_typeof(pitch)==="object"&&typeof pitch.step==="number"&&typeof pitch.alt==="number"?true:false}var FIFTHS=[0,2,4,-1,1,3,5];var STEPS_TO_OCTS=FIFTHS.map(function(fifths){return Math.floor(fifths*7/12)});function encode(pitch){var step=pitch.step,alt=pitch.alt,oct=pitch.oct,_a=pitch.dir,dir=_a===void 0?1:_a;var f=FIFTHS[step]+7*alt;if(oct===undefined){return[dir*f]}var o=oct-STEPS_TO_OCTS[step]-4*alt;return[dir*f,dir*o]}var FIFTHS_TO_STEPS=[3,0,4,1,5,2,6];function decode(coord){var f=coord[0],o=coord[1],dir=coord[2];var step=FIFTHS_TO_STEPS[unaltered(f)];var alt=Math.floor((f+1)/7);if(o===undefined){return{step:step,alt:alt,dir:dir}}var oct=o+4*alt+STEPS_TO_OCTS[step];return{step:step,alt:alt,oct:oct,dir:dir}}function unaltered(f){var i=(f+1)%7;return i<0?7+i:i}var NoNote={empty:true,name:"",pc:"",acc:""};var cache=new Map;var stepToLetter=function stepToLetter(step){return"CDEFGAB".charAt(step)};var altToAcc=function altToAcc(alt){return alt<0?fillStr("b",-alt):fillStr("#",alt)};var accToAlt=function accToAlt(acc){return acc[0]==="b"?-acc.length:acc.length};function note(src){var cached=cache.get(src);if(cached){return cached}var value=typeof src==="string"?parse(src):isPitch(src)?note(pitchName(src)):isNamed(src)?note(src.name):NoNote;cache.set(src,value);return value}var REGEX=/^([a-gA-G]?)(#{1,}|b{1,}|x{1,}|)(-?\d*)\s*(.*)$/;function tokenizeNote(str){var m=REGEX.exec(str);return[m[1].toUpperCase(),m[2].replace(/x/g,"##"),m[3],m[4]]}function coordToNote(noteCoord){return note(decode(noteCoord))}var SEMI=[0,2,4,5,7,9,11];function parse(noteName){var tokens=tokenizeNote(noteName);if(tokens[0]===""||tokens[3]!==""){return NoNote}var letter=tokens[0];var acc=tokens[1];var octStr=tokens[2];var step=(letter.charCodeAt(0)+3)%7;var alt=accToAlt(acc);var oct=octStr.length?+octStr:undefined;var coord=encode({step:step,alt:alt,oct:oct});var name=letter+acc+octStr;var pc=letter+acc;var chroma=(SEMI[step]+alt+120)%12;var o=oct===undefined?-100:oct;var height=SEMI[step]+alt+12*(o+1);var midi=height>=0&&height<=127?height:null;var freq=oct===undefined?null:Math.pow(2,(height-69)/12)*440;return{empty:false,acc:acc,alt:alt,chroma:chroma,coord:coord,freq:freq,height:height,letter:letter,midi:midi,name:name,oct:oct,pc:pc,step:step}}function pitchName(props){var step=props.step,alt=props.alt,oct=props.oct;var letter=stepToLetter(step);if(!letter){return""}var pc=letter+altToAcc(alt);return oct||oct===0?pc+oct:pc}var NoInterval={empty:true,name:"",acc:""};var INTERVAL_TONAL_REGEX="([-+]?\\d+)(d{1,4}|m|M|P|A{1,4})";var INTERVAL_SHORTHAND_REGEX="(AA|A|P|M|m|d|dd)([-+]?\\d+)";var REGEX$1=new RegExp("^"+INTERVAL_TONAL_REGEX+"|"+INTERVAL_SHORTHAND_REGEX+"$");function tokenizeInterval(str){var m=REGEX$1.exec(""+str);if(m===null){return["",""]}return m[1]?[m[1],m[2]]:[m[4],m[3]]}var cache$1={};function interval(src){return typeof src==="string"?cache$1[src]||(cache$1[src]=parse$1(src)):isPitch(src)?interval(pitchName$1(src)):isNamed(src)?interval(src.name):NoInterval}var SIZES=[0,2,4,5,7,9,11];var TYPES="PMMPPMM";function parse$1(str){var tokens=tokenizeInterval(str);if(tokens[0]===""){return NoInterval}var num=+tokens[0];var q=tokens[1];var step=(Math.abs(num)-1)%7;var t=TYPES[step];if(t==="M"&&q==="P"){return NoInterval}var type=t==="M"?"majorable":"perfectable";var name=""+num+q;var dir=num<0?-1:1;var simple=num===8||num===-8?num:dir*(step+1);var alt=qToAlt(type,q);var oct=Math.floor((Math.abs(num)-1)/7);var semitones=dir*(SIZES[step]+alt+12*oct);var chroma=(dir*(SIZES[step]+alt)%12+12)%12;var coord=encode({step:step,alt:alt,oct:oct,dir:dir});return{empty:false,name:name,num:num,q:q,step:step,alt:alt,dir:dir,type:type,simple:simple,semitones:semitones,chroma:chroma,coord:coord,oct:oct}}function coordToInterval(coord){var f=coord[0],_a=coord[1],o=_a===void 0?0:_a;var isDescending=f*7+o*12<0;var ivl=isDescending?[-f,-o,-1]:[f,o,1];return interval(decode(ivl))}function qToAlt(type,q){return q==="M"&&type==="majorable"||q==="P"&&type==="perfectable"?0:q==="m"&&type==="majorable"?-1:/^A+$/.test(q)?q.length:/^d+$/.test(q)?-1*(type==="perfectable"?q.length:q.length+1):0}function pitchName$1(props){var step=props.step,alt=props.alt,_a=props.oct,oct=_a===void 0?0:_a,dir=props.dir;if(!dir){return""}var num=step+1+7*oct;var d=dir<0?"-":"";var type=TYPES[step]==="M"?"majorable":"perfectable";var name=d+num+altToQ(type,alt);return name}function altToQ(type,alt){if(alt===0){return type==="majorable"?"M":"P"}else if(alt===-1&&type==="majorable"){return"m"}else if(alt>0){return fillStr("A",alt)}else{return fillStr("d",type==="perfectable"?alt:alt+1)}}function transpose(noteName,intervalName){var note$1=note(noteName);var interval$1=interval(intervalName);if(note$1.empty||interval$1.empty){return""}var noteCoord=note$1.coord;var intervalCoord=interval$1.coord;var tr=noteCoord.length===1?[noteCoord[0]+intervalCoord[0]]:[noteCoord[0]+intervalCoord[0],noteCoord[1]+intervalCoord[1]];return coordToNote(tr).name}function distance(fromNote,toNote){var from=note(fromNote);var to=note(toNote);if(from.empty||to.empty){return""}var fcoord=from.coord;var tcoord=to.coord;var fifths=tcoord[0]-fcoord[0];var octs=fcoord.length===2&&tcoord.length===2?tcoord[1]-fcoord[1]:-Math.floor(fifths*7/12);return coordToInterval([fifths,octs]).name}exports.accToAlt=accToAlt;exports.altToAcc=altToAcc;exports.coordToInterval=coordToInterval;exports.coordToNote=coordToNote;exports.decode=decode;exports.deprecate=deprecate;exports.distance=distance;exports.encode=encode;exports.fillStr=fillStr;exports.interval=interval;exports.isNamed=isNamed;exports.isPitch=isPitch;exports.note=note;exports.stepToLetter=stepToLetter;exports.tokenizeInterval=tokenizeInterval;exports.tokenizeNote=tokenizeNote;exports.transpose=transpose;Object.defineProperty(exports,"__esModule",{value:true})})},{}],11:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports):typeof define==="function"&&define.amd?define(["exports"],factory):(global=global||self,factory(global.DurationValue={}))})(this,function(exports){"use strict";var _assign3=function __assign(){_assign3=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign3.apply(this,arguments)};var DATA=[[.125,"dl",["large","duplex longa","maxima","octuple","octuple whole"]],[.25,"l",["long","longa"]],[.5,"d",["double whole","double","breve"]],[1,"w",["whole","semibreve"]],[2,"h",["half","minim"]],[4,"q",["quarter","crotchet"]],[8,"e",["eighth","quaver"]],[16,"s",["sixteenth","semiquaver"]],[32,"t",["thirty-second","demisemiquaver"]],[64,"sf",["sixty-fourth","hemidemisemiquaver"]],[128,"h",["hundred twenty-eighth"]],[256,"th",["two hundred fifty-sixth"]]];var VALUES=[];DATA.forEach(function(_a){var denominator=_a[0],shorthand=_a[1],names=_a[2];return add(denominator,shorthand,names)});var NoDuration={empty:true,name:"",value:0,fraction:[0,0],shorthand:"",dots:"",names:[]};function names(){return VALUES.reduce(function(names,duration){duration.names.forEach(function(name){return names.push(name)});return names},[])}function shorthands(){return VALUES.map(function(dur){return dur.shorthand})}var REGEX=/^([^.]+)(\.*)$/;function get(name){var _a=REGEX.exec(name)||[],_=_a[0],simple=_a[1],dots=_a[2];var base=VALUES.find(function(dur){return dur.shorthand===simple||dur.names.includes(simple)});if(!base){return NoDuration}var fraction=calcDots(base.fraction,dots.length);var value=fraction[0]/fraction[1];return _assign3(_assign3({},base),{name:name,dots:dots,value:value,fraction:fraction})}var value=function value(name){return get(name).value};var fraction=function fraction(name){return get(name).fraction};var index={names:names,shorthands:shorthands,get:get,value:value,fraction:fraction};function add(denominator,shorthand,names){VALUES.push({empty:false,dots:"",name:"",value:1/denominator,fraction:denominator<1?[1/denominator,1]:[1,denominator],shorthand:shorthand,names:names})}function calcDots(fraction,dots){var pow=Math.pow(2,dots);var numerator=fraction[0]*pow;var denominator=fraction[1]*pow;var base=numerator;for(var i=0;i<dots;i++){numerator+=base/Math.pow(2,i+1)}while(numerator%2===0&&denominator%2===0){numerator/=2;denominator/=2}return[numerator,denominator]}exports["default"]=index;exports.fraction=fraction;exports.get=get;exports.names=names;exports.shorthands=shorthands;exports.value=value;Object.defineProperty(exports,"__esModule",{value:true})})},{}],12:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core"],factory):(global=global||self,factory(global.Interval={},global.core))})(this,function(exports,core){"use strict";function names(){return"1P 2M 3M 4P 5P 6m 7m".split(" ")}var get=core.interval;var name=function(_name){function name(_x){return _name.apply(this,arguments)}name.toString=function(){return _name.toString()};return name}(function(name){return core.interval(name).name});var semitones=function semitones(name){return core.interval(name).semitones};var quality=function quality(name){return core.interval(name).q};var num=function num(name){return core.interval(name).num};function simplify(name){var i=core.interval(name);return i.empty?"":i.simple+i.q}function invert(name){var i=core.interval(name);if(i.empty){return""}var step=(7-i.step)%7;var alt=i.type==="perfectable"?-i.alt:-(i.alt+1);return core.interval({step:step,alt:alt,oct:i.oct,dir:i.dir}).name}var IN=[1,2,2,3,3,4,5,5,6,6,7,7];var IQ="P m M m M P d P m M m M".split(" ");function fromSemitones(semitones){var d=semitones<0?-1:1;var n=Math.abs(semitones);var c=n%12;var o=Math.floor(n/12);return d*(IN[c]+7*o)+IQ[c]}var distance=core.distance;var add=combinator(function(a,b){return[a[0]+b[0],a[1]+b[1]]});var addTo=function addTo(interval){return function(other){return add(interval,other)}};var substract=combinator(function(a,b){return[a[0]-b[0],a[1]-b[1]]});var index={names:names,get:get,name:name,num:num,semitones:semitones,quality:quality,fromSemitones:fromSemitones,distance:distance,invert:invert,simplify:simplify,add:add,addTo:addTo,substract:substract};function combinator(fn){return function(a,b){var coordA=core.interval(a).coord;var coordB=core.interval(b).coord;if(coordA&&coordB){var coord=fn(coordA,coordB);return core.coordToInterval(coord).name}}}exports.add=add;exports.addTo=addTo;exports["default"]=index;exports.distance=distance;exports.fromSemitones=fromSemitones;exports.get=get;exports.invert=invert;exports.name=name;exports.names=names;exports.num=num;exports.quality=quality;exports.semitones=semitones;exports.simplify=simplify;exports.substract=substract;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10}],13:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core"),require("@tonaljs/note"),require("@tonaljs/roman-numeral")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core","@tonaljs/note","@tonaljs/roman-numeral"],factory):(global=global||self,factory(global.Key={},global.core,global.note,global.romanNumeral))})(this,function(exports,core,note,romanNumeral){"use strict";var _assign4=function __assign(){_assign4=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign4.apply(this,arguments)};var mapToScale=function mapToScale(scale){return function(symbols,sep){if(sep===void 0){sep=""}return symbols.map(function(symbol,index){return symbol!=="-"?scale[index]+sep+symbol:""})}};function keyScale(gradesLiteral,chordsLiteral,hfLiteral,chordScalesLiteral){return function(tonic){var grades=gradesLiteral.split(" ");var intervals=grades.map(function(gr){return romanNumeral.get(gr).interval||""});var scale=intervals.map(function(interval){return core.transpose(tonic,interval)});var map=mapToScale(scale);return{tonic:tonic,grades:grades,intervals:intervals,scale:scale,chords:map(chordsLiteral.split(" ")),chordsHarmonicFunction:hfLiteral.split(" "),chordScales:map(chordScalesLiteral.split(",")," ")}}}var distInFifths=function distInFifths(from,to){var f=core.note(from);var t=core.note(to);return f.empty||t.empty?0:t.coord[0]-f.coord[0]};var MajorScale=keyScale("I II III IV V VI VII","maj7 m7 m7 maj7 7 m7 m7b5","T SD T SD D T D","major,dorian,phrygian,lydian,mixolydian,minor,locrian");var NaturalScale=keyScale("I II bIII IV V bVI bVII","m7 m7b5 maj7 m7 m7 maj7 7","T SD T SD D SD SD","minor,locrian,major,dorian,phrygian,lydian,mixolydian");var HarmonicScale=keyScale("I II bIII IV V bVI VII","mmaj7 m7b5 +maj7 m7 7 maj7 mo7","T SD T SD D SD D","harmonic minor,locrian 6,major augmented,lydian diminished,phrygian dominant,lydian #9,ultralocrian");var MelodicScale=keyScale("I II bIII IV V VI VII","m6 m7 +maj7 7 7 m7b5 m7b5","T SD T SD D - -","melodic minor,dorian b2,lydian augmented,lydian dominant,mixolydian b6,locrian #2,altered");function majorKey(tonic){var keyScale=MajorScale(tonic);var alteration=distInFifths("C",tonic);var map=mapToScale(keyScale.scale);return _assign4(_assign4({},keyScale),{type:"major",minorRelative:core.transpose(tonic,"-3m"),alteration:alteration,keySignature:core.altToAcc(alteration),secondaryDominants:map("- VI7 VII7 I7 II7 III7 -".split(" ")),secondaryDominantsMinorRelative:map("- IIIm7b5 IV#m7 Vm7 VIm7 VIIm7b5 -".split(" ")),substituteDominants:map("- bIII7 IV7 bV7 bVI7 bVII7 -".split(" ")),substituteDominantsMinorRelative:map("- IIIm7 Im7 IIbm7 VIm7 IVm7 -".split(" "))})}function minorKey(tonic){var alteration=distInFifths("C",tonic)-3;return{type:"minor",tonic:tonic,relativeMajor:core.transpose(tonic,"3m"),alteration:alteration,keySignature:core.altToAcc(alteration),natural:NaturalScale(tonic),harmonic:HarmonicScale(tonic),melodic:MelodicScale(tonic)}}function majorTonicFromKeySignature(sig){if(typeof sig==="number"){return note.transposeFifths("C",sig)}else if(typeof sig==="string"&&/^b+|#+$/.test(sig)){return note.transposeFifths("C",core.accToAlt(sig))}return null}var index={majorKey:majorKey,majorTonicFromKeySignature:majorTonicFromKeySignature,minorKey:minorKey};exports["default"]=index;exports.majorKey=majorKey;exports.majorTonicFromKeySignature=majorTonicFromKeySignature;exports.minorKey=minorKey;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10,"@tonaljs/note":16,"@tonaljs/roman-numeral":20}],14:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core"],factory):(global=global||self,factory(global.Midi={},global.core))})(this,function(exports,core){"use strict";function isMidi(arg){return+arg>=0&&+arg<=127}function toMidi(note){if(isMidi(note)){return+note}var n=core.note(note);return n.empty?null:n.midi}function midiToFreq(midi,tuning){if(tuning===void 0){tuning=440}return Math.pow(2,(midi-69)/12)*tuning}var L2=Math.log(2);var L440=Math.log(440);function freqToMidi(freq){var v=12*(Math.log(freq)-L440)/L2+69;return Math.round(v*100)/100}var SHARPS="C C# D D# E F F# G G# A A# B".split(" ");var FLATS="C Db D Eb E F Gb G Ab A Bb B".split(" ");function midiToNoteName(midi,options){if(options===void 0){options={}}midi=Math.round(midi);var pcs=options.sharps===true?SHARPS:FLATS;var pc=pcs[midi%12];if(options.pitchClass){return pc}var o=Math.floor(midi/12)-1;return pc+o}var index={isMidi:isMidi,toMidi:toMidi,midiToFreq:midiToFreq,midiToNoteName:midiToNoteName,freqToMidi:freqToMidi};exports["default"]=index;exports.freqToMidi=freqToMidi;exports.isMidi=isMidi;exports.midiToFreq=midiToFreq;exports.midiToNoteName=midiToNoteName;exports.toMidi=toMidi;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10}],15:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core"),require("@tonaljs/pcset")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core","@tonaljs/pcset"],factory):(global=global||self,factory(global.Mode={},global.core,global.pcset))})(this,function(exports,core,pcset){"use strict";var _assign5=function __assign(){_assign5=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign5.apply(this,arguments)};var DATA=[[0,2773,0,"ionian","","Maj7","major"],[1,2902,2,"dorian","m","m7"],[2,3418,4,"phrygian","m","m7"],[3,2741,-1,"lydian","","Maj7"],[4,2774,1,"mixolydian","","7"],[5,2906,3,"aeolian","m","m7","minor"],[6,3434,5,"locrian","dim","m7b5"]];var NoMode=_assign5(_assign5({},pcset.EmptyPcset),{name:"",alt:0,modeNum:NaN,triad:"",seventh:"",aliases:[]});var modes=DATA.map(toMode);var index={};modes.forEach(function(mode){index[mode.name]=mode;mode.aliases.forEach(function(alias){index[alias]=mode})});function get(name){return typeof name==="string"?index[name.toLowerCase()]||NoMode:name&&name.name?get(name.name):NoMode}var mode=core.deprecate("Mode.mode","Mode.get",get);function all(){return modes.slice()}var entries=core.deprecate("Mode.mode","Mode.all",all);function names(){return modes.map(function(mode){return mode.name})}function toMode(mode){var modeNum=mode[0],setNum=mode[1],alt=mode[2],name=mode[3],triad=mode[4],seventh=mode[5],alias=mode[6];var aliases=alias?[alias]:[];var chroma=Number(setNum).toString(2);var intervals=pcset.chromaToIntervals(chroma);return{empty:false,intervals:intervals,modeNum:modeNum,chroma:chroma,normalized:chroma,name:name,setNum:setNum,alt:alt,triad:triad,seventh:seventh,aliases:aliases}}var index$1={get:get,names:names,all:all,entries:entries,mode:mode};exports.all=all;exports["default"]=index$1;exports.entries=entries;exports.get=get;exports.mode=mode;exports.names=names;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10,"@tonaljs/pcset":17}],16:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core"),require("@tonaljs/midi")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core","@tonaljs/midi"],factory):(global=global||self,factory(global.Note={},global.core,global.midi$1))})(this,function(exports,core,midi$1){"use strict";var NAMES=["C","D","E","F","G","A","B"];var toName=function toName(n){return n.name};var onlyNotes=function onlyNotes(array){return array.map(core.note).filter(function(n){return!n.empty})};function names(array){if(array===undefined){return NAMES.slice()}else if(!Array.isArray(array)){return[]}else{return onlyNotes(array).map(toName)}}var get=core.note;var name=function name(note){return get(note).name};var pitchClass=function pitchClass(note){return get(note).pc};var accidentals=function accidentals(note){return get(note).acc};var octave=function octave(note){return get(note).oct};var midi=function midi(note){return get(note).midi};var freq=function freq(note){return get(note).freq};var chroma=function chroma(note){return get(note).chroma};function fromMidi(midi){return midi$1.midiToNoteName(midi)}function fromMidiSharps(midi){return midi$1.midiToNoteName(midi,{sharps:true})}var transpose=core.transpose;var tr=core.transpose;var transposeBy=function transposeBy(interval){return function(note){return transpose(note,interval)}};var trBy=transposeBy;var transposeFrom=function transposeFrom(note){return function(interval){return transpose(note,interval)}};var trFrom=transposeFrom;function transposeFifths(noteName,fifths){var note=get(noteName);if(note.empty){return""}var _a=note.coord,nFifths=_a[0],nOcts=_a[1];var transposed=nOcts===undefined?core.coordToNote([nFifths+fifths]):core.coordToNote([nFifths+fifths,nOcts]);return transposed.name}var trFifths=transposeFifths;var ascending=function ascending(a,b){return a.height-b.height};var descending=function descending(a,b){return b.height-a.height};function sortedNames(notes,comparator){comparator=comparator||ascending;return onlyNotes(notes).sort(comparator).map(toName)}function sortedUniqNames(notes){return sortedNames(notes,ascending).filter(function(n,i,a){return i===0||n!==a[i-1]})}var simplify=nameBuilder(true);var enharmonic=nameBuilder(false);function nameBuilder(sameAccidentals){return function(noteName){var note=get(noteName);if(note.empty){return""}var sharps=sameAccidentals?note.alt>0:note.alt<0;var pitchClass=note.midi===null;return midi$1.midiToNoteName(note.midi||note.chroma,{sharps:sharps,pitchClass:pitchClass})}}var index={names:names,get:get,name:name,pitchClass:pitchClass,accidentals:accidentals,octave:octave,midi:midi,ascending:ascending,descending:descending,sortedNames:sortedNames,sortedUniqNames:sortedUniqNames,fromMidi:fromMidi,fromMidiSharps:fromMidiSharps,freq:freq,chroma:chroma,transpose:transpose,tr:tr,transposeBy:transposeBy,trBy:trBy,transposeFrom:transposeFrom,trFrom:trFrom,transposeFifths:transposeFifths,trFifths:trFifths,simplify:simplify,enharmonic:enharmonic};exports.accidentals=accidentals;exports.ascending=ascending;exports.chroma=chroma;exports["default"]=index;exports.descending=descending;exports.enharmonic=enharmonic;exports.freq=freq;exports.fromMidi=fromMidi;exports.fromMidiSharps=fromMidiSharps;exports.get=get;exports.midi=midi;exports.name=name;exports.names=names;exports.octave=octave;exports.pitchClass=pitchClass;exports.simplify=simplify;exports.sortedNames=sortedNames;exports.sortedUniqNames=sortedUniqNames;exports.tr=tr;exports.trBy=trBy;exports.trFifths=trFifths;exports.trFrom=trFrom;exports.transpose=transpose;exports.transposeBy=transposeBy;exports.transposeFifths=transposeFifths;exports.transposeFrom=transposeFrom;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10,"@tonaljs/midi":14}],17:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/collection"),require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/collection","@tonaljs/core"],factory):(global=global||self,factory(global.Pcset={},global.collection,global.core))})(this,function(exports,collection,core){"use strict";var _a;var EmptyPcset={empty:true,name:"",setNum:0,chroma:"000000000000",normalized:"000000000000",intervals:[]};var setNumToChroma=function setNumToChroma(num){return Number(num).toString(2)};var chromaToNumber=function chromaToNumber(chroma){return parseInt(chroma,2)};var REGEX=/^[01]{12}$/;function isChroma(set){return REGEX.test(set)}var isPcsetNum=function isPcsetNum(set){return typeof set==="number"&&set>=0&&set<=4095};var isPcset=function isPcset(set){return set&&isChroma(set.chroma)};var cache=(_a={},_a[EmptyPcset.chroma]=EmptyPcset,_a);function get(src){var chroma=isChroma(src)?src:isPcsetNum(src)?setNumToChroma(src):Array.isArray(src)?listToChroma(src):isPcset(src)?src.chroma:EmptyPcset.chroma;return cache[chroma]=cache[chroma]||chromaToPcset(chroma)}var pcset=core.deprecate("Pcset.pcset","Pcset.get",get);var chroma=function chroma(set){return get(set).chroma};var intervals=function intervals(set){return get(set).intervals};var num=function num(set){return get(set).setNum};var IVLS=["1P","2m","2M","3m","3M","4P","5d","5P","6m","6M","7m","7M"];function chromaToIntervals(chroma){var intervals=[];for(var i=0;i<12;i++){if(chroma.charAt(i)==="1")intervals.push(IVLS[i])}return intervals}function chromas(){return collection.range(2048,4095).map(setNumToChroma)}function modes(set,normalize){if(normalize===void 0){normalize=true}var pcs=get(set);var binary=pcs.chroma.split("");return collection.compact(binary.map(function(_,i){var r=collection.rotate(i,binary);return normalize&&r[0]==="0"?null:r.join("")}))}function isEqual(s1,s2){return get(s1).setNum===get(s2).setNum}function isSubsetOf(set){var s=get(set).setNum;return function(notes){var o=get(notes).setNum;return s&&s!==o&&(o&s)===o}}function isSupersetOf(set){var s=get(set).setNum;return function(notes){var o=get(notes).setNum;return s&&s!==o&&(o|s)===o}}function isNoteIncludedIn(set){var s=get(set);return function(noteName){var n=core.note(noteName);return s&&!n.empty&&s.chroma.charAt(n.chroma)==="1"}}var includes=isNoteIncludedIn;function filter(set){var isIncluded=isNoteIncludedIn(set);return function(notes){return notes.filter(isIncluded)}}var index={get:get,chroma:chroma,num:num,intervals:intervals,chromas:chromas,isSupersetOf:isSupersetOf,isSubsetOf:isSubsetOf,isNoteIncludedIn:isNoteIncludedIn,isEqual:isEqual,filter:filter,modes:modes,pcset:pcset};function chromaRotations(chroma){var binary=chroma.split("");return binary.map(function(_,i){return collection.rotate(i,binary).join("")})}function chromaToPcset(chroma){var setNum=chromaToNumber(chroma);var normalizedNum=chromaRotations(chroma).map(chromaToNumber).filter(function(n){return n>=2048}).sort()[0];var normalized=setNumToChroma(normalizedNum);var intervals=chromaToIntervals(chroma);return{empty:false,name:"",setNum:setNum,chroma:chroma,normalized:normalized,intervals:intervals}}function listToChroma(set){if(set.length===0){return EmptyPcset.chroma}var pitch;var binary=[0,0,0,0,0,0,0,0,0,0,0,0];for(var i=0;i<set.length;i++){pitch=core.note(set[i]);if(pitch.empty)pitch=core.interval(set[i]);if(!pitch.empty)binary[pitch.chroma]=1}return binary.join("")}exports.EmptyPcset=EmptyPcset;exports.chromaToIntervals=chromaToIntervals;exports.chromas=chromas;exports["default"]=index;exports.filter=filter;exports.get=get;exports.includes=includes;exports.isEqual=isEqual;exports.isNoteIncludedIn=isNoteIncludedIn;exports.isSubsetOf=isSubsetOf;exports.isSupersetOf=isSupersetOf;exports.modes=modes;exports.pcset=pcset;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/collection":9,"@tonaljs/core":10}],18:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/chord"),require("@tonaljs/core"),require("@tonaljs/roman-numeral")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/chord","@tonaljs/core","@tonaljs/roman-numeral"],factory):(global=global||self,factory(global.Progression={},global.chord,global.core,global.romanNumeral))})(this,function(exports,chord,core,romanNumeral){"use strict";function fromRomanNumerals(tonic,chords){var romanNumerals=chords.map(romanNumeral.get);return romanNumerals.map(function(rn){return core.transpose(tonic,core.interval(rn))+rn.chordType})}function toRomanNumerals(tonic,chords){return chords.map(function(chord$1){var _a=chord.tokenize(chord$1),note=_a[0],chordType=_a[1];var intervalName=core.distance(tonic,note);var roman=romanNumeral.get(core.interval(intervalName));return roman.name+chordType})}var index={fromRomanNumerals:fromRomanNumerals,toRomanNumerals:toRomanNumerals};exports["default"]=index;exports.fromRomanNumerals=fromRomanNumerals;exports.toRomanNumerals=toRomanNumerals;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/chord":8,"@tonaljs/core":10,"@tonaljs/roman-numeral":20}],19:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/collection"),require("@tonaljs/midi")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/collection","@tonaljs/midi"],factory):(global=global||self,factory(global.Range={},global.collection,global.midi))})(this,function(exports,collection,midi){"use strict";function numeric(notes){var midi$1=collection.compact(notes.map(midi.toMidi));if(!notes.length||midi$1.length!==notes.length){return[]}return midi$1.reduce(function(result,note){var last=result[result.length-1];return result.concat(collection.range(last,note).slice(1))},[midi$1[0]])}function chromatic(notes,options){return numeric(notes).map(function(midi$1){return midi.midiToNoteName(midi$1,options)})}var index={numeric:numeric,chromatic:chromatic};exports.chromatic=chromatic;exports["default"]=index;exports.numeric=numeric;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/collection":9,"@tonaljs/midi":14}],20:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core"],factory):(global=global||self,factory(global.RomanNumeral={},global.core))})(this,function(exports,core){"use strict";var NoRomanNumeral={empty:true,name:"",chordType:""};var cache={};function get(src){return typeof src==="string"?cache[src]||(cache[src]=parse(src)):typeof src==="number"?get(NAMES[src]||""):core.isPitch(src)?fromPitch(src):core.isNamed(src)?get(src.name):NoRomanNumeral}var romanNumeral=core.deprecate("RomanNumeral.romanNumeral","RomanNumeral.get",get);function names(major){if(major===void 0){major=true}return(major?NAMES:NAMES_MINOR).slice()}function fromPitch(pitch){return get(core.altToAcc(pitch.alt)+NAMES[pitch.step])}var REGEX=/^(#{1,}|b{1,}|x{1,}|)(IV|I{1,3}|VI{0,2}|iv|i{1,3}|vi{0,2})([^IViv]*)$/;function tokenize(str){return REGEX.exec(str)||["","","",""]}var ROMANS="I II III IV V VI VII";var NAMES=ROMANS.split(" ");var NAMES_MINOR=ROMANS.toLowerCase().split(" ");function parse(src){var _a=tokenize(src),name=_a[0],acc=_a[1],roman=_a[2],chordType=_a[3];if(!roman){return NoRomanNumeral}var upperRoman=roman.toUpperCase();var step=NAMES.indexOf(upperRoman);var alt=core.accToAlt(acc);var dir=1;return{empty:false,name:name,roman:roman,interval:core.interval({step:step,alt:alt,dir:dir}).name,acc:acc,chordType:chordType,alt:alt,step:step,major:roman===upperRoman,oct:0,dir:dir}}var index={names:names,get:get,romanNumeral:romanNumeral};exports["default"]=index;exports.get=get;exports.names=names;exports.tokenize=tokenize;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10}],21:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/core"),require("@tonaljs/pcset")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/core","@tonaljs/pcset"],factory):(global=global||self,factory(global.ScaleType={},global.core,global.pcset))})(this,function(exports,core,pcset){"use strict";var _assign6=function __assign(){_assign6=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign6.apply(this,arguments)};var SCALES=[["1P 2M 3M 5P 6M","major pentatonic","pentatonic"],["1P 3M 4P 5P 7M","ionian pentatonic"],["1P 3M 4P 5P 7m","mixolydian pentatonic","indian"],["1P 2M 4P 5P 6M","ritusen"],["1P 2M 4P 5P 7m","egyptian"],["1P 3M 4P 5d 7m","neopolitan major pentatonic"],["1P 3m 4P 5P 6m","vietnamese 1"],["1P 2m 3m 5P 6m","pelog"],["1P 2m 4P 5P 6m","kumoijoshi"],["1P 2M 3m 5P 6m","hirajoshi"],["1P 2m 4P 5d 7m","iwato"],["1P 2m 4P 5P 7m","in-sen"],["1P 3M 4A 5P 7M","lydian pentatonic","chinese"],["1P 3m 4P 6m 7m","malkos raga"],["1P 3m 4P 5d 7m","locrian pentatonic","minor seven flat five pentatonic"],["1P 3m 4P 5P 7m","minor pentatonic","vietnamese 2"],["1P 3m 4P 5P 6M","minor six pentatonic"],["1P 2M 3m 5P 6M","flat three pentatonic","kumoi"],["1P 2M 3M 5P 6m","flat six pentatonic"],["1P 2m 3M 5P 6M","scriabin"],["1P 3M 5d 6m 7m","whole tone pentatonic"],["1P 3M 4A 5A 7M","lydian #5P pentatonic"],["1P 3M 4A 5P 7m","lydian dominant pentatonic"],["1P 3m 4P 5P 7M","minor #7M pentatonic"],["1P 3m 4d 5d 7m","super locrian pentatonic"],["1P 2M 3m 4P 5P 7M","minor hexatonic"],["1P 2A 3M 5P 5A 7M","augmented"],["1P 3m 4P 5d 5P 7m","minor blues","blues"],["1P 2M 3m 3M 5P 6M","major blues"],["1P 2M 4P 5P 6M 7m","piongio"],["1P 2m 3M 4A 6M 7m","prometheus neopolitan"],["1P 2M 3M 4A 6M 7m","prometheus"],["1P 2m 3M 5d 6m 7m","mystery #1"],["1P 2m 3M 4P 5A 6M","six tone symmetric"],["1P 2M 3M 4A 5A 7m","whole tone"],["1P 2M 3M 4P 5d 6m 7m","locrian major","arabian"],["1P 2m 3M 4A 5P 6m 7M","double harmonic lydian"],["1P 2M 3m 4P 5P 6m 7M","harmonic minor"],["1P 2m 3m 3M 5d 6m 7m","altered","super locrian","diminished whole tone","pomeroy"],["1P 2M 3m 4P 5d 6m 7m","locrian #2","half-diminished",'"aeolian b5'],["1P 2M 3M 4P 5P 6m 7m","mixolydian b6","melodic minor fifth mode","hindu"],["1P 2M 3M 4A 5P 6M 7m","lydian dominant","lydian b7","overtone"],["1P 2M 3M 4A 5P 6M 7M","lydian"],["1P 2M 3M 4A 5A 6M 7M","lydian augmented"],["1P 2m 3m 4P 5P 6M 7m","dorian b2","phrygian #6","melodic minor second mode"],["1P 2M 3m 4P 5P 6M 7M","melodic minor"],["1P 2m 3m 4P 5d 6m 7m","locrian"],["1P 2m 3m 4d 5d 6m 7d","ultralocrian","superlocrian bb7","·superlocrian diminished"],["1P 2m 3m 4P 5d 6M 7m","locrian 6","locrian natural 6","locrian sharp 6"],["1P 2A 3M 4P 5P 5A 7M","augmented heptatonic"],["1P 2M 3m 5d 5P 6M 7m","romanian minor"],["1P 2M 3m 4A 5P 6M 7m","dorian #4"],["1P 2M 3m 4A 5P 6M 7M","lydian diminished"],["1P 2m 3m 4P 5P 6m 7m","phrygian"],["1P 2M 3M 4A 5A 7m 7M","leading whole tone"],["1P 2M 3M 4A 5P 6m 7m","lydian minor"],["1P 2m 3M 4P 5P 6m 7m","phrygian dominant","spanish","phrygian major"],["1P 2m 3m 4P 5P 6m 7M","balinese"],["1P 2m 3m 4P 5P 6M 7M","neopolitan major"],["1P 2M 3m 4P 5P 6m 7m","aeolian","minor"],["1P 2M 3M 4P 5P 6m 7M","harmonic major"],["1P 2m 3M 4P 5P 6m 7M","double harmonic major","gypsy"],["1P 2M 3m 4P 5P 6M 7m","dorian"],["1P 2M 3m 4A 5P 6m 7M","hungarian minor"],["1P 2A 3M 4A 5P 6M 7m","hungarian major"],["1P 2m 3M 4P 5d 6M 7m","oriental"],["1P 2m 3m 3M 4A 5P 7m","flamenco"],["1P 2m 3m 4A 5P 6m 7M","todi raga"],["1P 2M 3M 4P 5P 6M 7m","mixolydian","dominant"],["1P 2m 3M 4P 5d 6m 7M","persian"],["1P 2M 3M 4P 5P 6M 7M","major","ionian"],["1P 2m 3M 5d 6m 7m 7M","enigmatic"],["1P 2M 3M 4P 5A 6M 7M","major augmented","major #5","ionian augmented","ionian #5"],["1P 2A 3M 4A 5P 6M 7M","lydian #9"],["1P 2m 3M 4P 4A 5P 6m 7M","purvi raga"],["1P 2m 3m 3M 4P 5P 6m 7m","spanish heptatonic"],["1P 2M 3M 4P 5P 6M 7m 7M","bebop"],["1P 2M 3m 3M 4P 5P 6M 7m","bebop minor"],["1P 2M 3M 4P 5P 5A 6M 7M","bebop major"],["1P 2m 3m 4P 5d 5P 6m 7m","bebop locrian"],["1P 2M 3m 4P 5P 6m 7m 7M","minor bebop"],["1P 2M 3m 4P 5d 6m 6M 7M","diminished","whole-half diminished"],["1P 2M 3M 4P 5d 5P 6M 7M","ichikosucho"],["1P 2M 3m 4P 5P 6m 6M 7M","minor six diminished"],["1P 2m 3m 3M 4A 5P 6M 7m","half-whole diminished","dominant diminished"],["1P 3m 3M 4P 5P 6M 7m 7M","kafi raga"],["1P 2M 3m 3M 4P 5d 5P 6M 7m","composite blues"],["1P 2m 2M 3m 3M 4P 5d 5P 6m 6M 7m 7M","chromatic"]];var NoScaleType=_assign6(_assign6({},pcset.EmptyPcset),{intervals:[],aliases:[]});var dictionary=[];var index={};function names(){return dictionary.map(function(scale){return scale.name})}function get(type){return index[type]||NoScaleType}var scaleType=core.deprecate("ScaleDictionary.scaleType","ScaleType.get",get);function all(){return dictionary.slice()}var entries=core.deprecate("ScaleDictionary.entries","ScaleType.all",all);function keys(){return Object.keys(index)}function removeAll(){dictionary=[];index={}}function add(intervals,name,aliases){if(aliases===void 0){aliases=[]}var scale=_assign6(_assign6({},pcset.get(intervals)),{name:name,intervals:intervals,aliases:aliases});dictionary.push(scale);index[scale.name]=scale;index[scale.setNum]=scale;index[scale.chroma]=scale;scale.aliases.forEach(function(alias){return addAlias(scale,alias)});return scale}function addAlias(scale,alias){index[alias]=scale}SCALES.forEach(function(_a){var ivls=_a[0],name=_a[1],aliases=_a.slice(2);return add(ivls.split(" "),name,aliases)});var index$1={names:names,get:get,all:all,add:add,removeAll:removeAll,keys:keys,entries:entries,scaleType:scaleType};exports.NoScaleType=NoScaleType;exports.add=add;exports.addAlias=addAlias;exports.all=all;exports["default"]=index$1;exports.entries=entries;exports.get=get;exports.keys=keys;exports.names=names;exports.removeAll=removeAll;exports.scaleType=scaleType;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/core":10,"@tonaljs/pcset":17}],22:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/chord-type"),require("@tonaljs/collection"),require("@tonaljs/core"),require("@tonaljs/note"),require("@tonaljs/pcset"),require("@tonaljs/scale-type")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/chord-type","@tonaljs/collection","@tonaljs/core","@tonaljs/note","@tonaljs/pcset","@tonaljs/scale-type"],factory):(global=global||self,factory(global.Scale={},global.chordType,global.collection,global.core,global.note,global.pcset,global.scaleType))})(this,function(exports,chordType,collection,core,note,pcset,scaleType){"use strict";var _assign7=function __assign(){_assign7=Object.assign||function __assign(t){for(var s,i=1,n=arguments.length;i<n;i++){s=arguments[i];for(var p in s){if(Object.prototype.hasOwnProperty.call(s,p))t[p]=s[p]}}return t};return _assign7.apply(this,arguments)};var NoScale={empty:true,name:"",type:"",tonic:null,setNum:NaN,chroma:"",normalized:"",aliases:[],notes:[],intervals:[]};function tokenize(name){if(typeof name!=="string"){return["",""]}var i=name.indexOf(" ");var tonic=core.note(name.substring(0,i));if(tonic.empty){var n=core.note(name);return n.empty?["",name]:[n.name,""]}var type=name.substring(tonic.name.length+1);return[tonic.name,type.length?type:""]}var names=scaleType.names;function get(src){var tokens=Array.isArray(src)?src:tokenize(src);var tonic=core.note(tokens[0]).name;var st=scaleType.get(tokens[1]);if(st.empty){return NoScale}var type=st.name;var notes=tonic?st.intervals.map(function(i){return core.transpose(tonic,i)}):[];var name=tonic?tonic+" "+type:type;return _assign7(_assign7({},st),{name:name,type:type,tonic:tonic,notes:notes})}var scale=core.deprecate("Scale.scale","Scale.get",get);function scaleChords(name){var s=get(name);var inScale=pcset.isSubsetOf(s.chroma);return chordType.all().filter(function(chord){return inScale(chord.chroma)}).map(function(chord){return chord.aliases[0]})}function extended(name){var s=get(name);var isSuperset=pcset.isSupersetOf(s.chroma);return scaleType.all().filter(function(scale){return isSuperset(scale.chroma)}).map(function(scale){return scale.name})}function reduced(name){var isSubset=pcset.isSubsetOf(get(name).chroma);return scaleType.all().filter(function(scale){return isSubset(scale.chroma)}).map(function(scale){return scale.name})}function scaleNotes(notes){var pcset=notes.map(function(n){return core.note(n).pc}).filter(function(x){return x});var tonic=pcset[0];var scale=note.sortedUniqNames(pcset);return collection.rotate(scale.indexOf(tonic),scale)}function modeNames(name){var s=get(name);if(s.empty){return[]}var tonics=s.tonic?s.notes:s.intervals;return pcset.modes(s.chroma).map(function(chroma,i){var modeName=get(chroma).name;return modeName?[tonics[i],modeName]:["",""]}).filter(function(x){return x[0]})}var index={get:get,names:names,extended:extended,modeNames:modeNames,reduced:reduced,scaleChords:scaleChords,scaleNotes:scaleNotes,tokenize:tokenize,scale:scale};exports["default"]=index;exports.extended=extended;exports.get=get;exports.modeNames=modeNames;exports.names=names;exports.reduced=reduced;exports.scale=scale;exports.scaleChords=scaleChords;exports.scaleNotes=scaleNotes;exports.tokenize=tokenize;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/chord-type":7,"@tonaljs/collection":9,"@tonaljs/core":10,"@tonaljs/note":16,"@tonaljs/pcset":17,"@tonaljs/scale-type":21}],23:[function(require,module,exports){(function(global,factory){_typeof(exports)==="object"&&typeof module!=="undefined"?factory(exports,require("@tonaljs/abc-notation"),require("@tonaljs/array"),require("@tonaljs/chord"),require("@tonaljs/chord-type"),require("@tonaljs/collection"),require("@tonaljs/core"),require("@tonaljs/duration-value"),require("@tonaljs/interval"),require("@tonaljs/key"),require("@tonaljs/midi"),require("@tonaljs/mode"),require("@tonaljs/note"),require("@tonaljs/pcset"),require("@tonaljs/progression"),require("@tonaljs/range"),require("@tonaljs/roman-numeral"),require("@tonaljs/scale"),require("@tonaljs/scale-type")):typeof define==="function"&&define.amd?define(["exports","@tonaljs/abc-notation","@tonaljs/array","@tonaljs/chord","@tonaljs/chord-type","@tonaljs/collection","@tonaljs/core","@tonaljs/duration-value","@tonaljs/interval","@tonaljs/key","@tonaljs/midi","@tonaljs/mode","@tonaljs/note","@tonaljs/pcset","@tonaljs/progression","@tonaljs/range","@tonaljs/roman-numeral","@tonaljs/scale","@tonaljs/scale-type"],factory):(global=global||self,factory(global.Tonal={},global.abcNotation,global.array,global.chord,global.ChordType,global.collection,global.Core,global.durationValue,global.interval,global.key,global.midi,global.mode,global.note,global.Pcset,global.progression,global.range,global.romanNumeral,global.scale,global.ScaleType))})(this,function(exports,abcNotation,array,chord,ChordType,collection,Core,durationValue,interval,key,midi,mode,note,Pcset,progression,range,romanNumeral,scale,ScaleType){"use strict";abcNotation=abcNotation&&Object.prototype.hasOwnProperty.call(abcNotation,"default")?abcNotation["default"]:abcNotation;chord=chord&&Object.prototype.hasOwnProperty.call(chord,"default")?chord["default"]:chord;ChordType=ChordType&&Object.prototype.hasOwnProperty.call(ChordType,"default")?ChordType["default"]:ChordType;collection=collection&&Object.prototype.hasOwnProperty.call(collection,"default")?collection["default"]:collection;durationValue=durationValue&&Object.prototype.hasOwnProperty.call(durationValue,"default")?durationValue["default"]:durationValue;interval=interval&&Object.prototype.hasOwnProperty.call(interval,"default")?interval["default"]:interval;key=key&&Object.prototype.hasOwnProperty.call(key,"default")?key["default"]:key;midi=midi&&Object.prototype.hasOwnProperty.call(midi,"default")?midi["default"]:midi;mode=mode&&Object.prototype.hasOwnProperty.call(mode,"default")?mode["default"]:mode;note=note&&Object.prototype.hasOwnProperty.call(note,"default")?note["default"]:note;Pcset=Pcset&&Object.prototype.hasOwnProperty.call(Pcset,"default")?Pcset["default"]:Pcset;progression=progression&&Object.prototype.hasOwnProperty.call(progression,"default")?progression["default"]:progression;range=range&&Object.prototype.hasOwnProperty.call(range,"default")?range["default"]:range;romanNumeral=romanNumeral&&Object.prototype.hasOwnProperty.call(romanNumeral,"default")?romanNumeral["default"]:romanNumeral;scale=scale&&Object.prototype.hasOwnProperty.call(scale,"default")?scale["default"]:scale;ScaleType=ScaleType&&Object.prototype.hasOwnProperty.call(ScaleType,"default")?ScaleType["default"]:ScaleType;var Tonal=Core;var PcSet=Pcset;var ChordDictionary=ChordType;var ScaleDictionary=ScaleType;Object.keys(Core).forEach(function(k){if(k!=="default")Object.defineProperty(exports,k,{enumerable:true,get:function get(){return Core[k]}})});exports.AbcNotation=abcNotation;exports.Array=array;exports.Chord=chord;exports.ChordType=ChordType;exports.Collection=collection;exports.Core=Core;exports.DurationValue=durationValue;exports.Interval=interval;exports.Key=key;exports.Midi=midi;exports.Mode=mode;exports.Note=note;exports.Pcset=Pcset;exports.Progression=progression;exports.Range=range;exports.RomanNumeral=romanNumeral;exports.Scale=scale;exports.ScaleType=ScaleType;exports.ChordDictionary=ChordDictionary;exports.PcSet=PcSet;exports.ScaleDictionary=ScaleDictionary;exports.Tonal=Tonal;Object.defineProperty(exports,"__esModule",{value:true})})},{"@tonaljs/abc-notation":4,"@tonaljs/array":5,"@tonaljs/chord":8,"@tonaljs/chord-type":7,"@tonaljs/collection":9,"@tonaljs/core":10,"@tonaljs/duration-value":11,"@tonaljs/interval":12,"@tonaljs/key":13,"@tonaljs/midi":14,"@tonaljs/mode":15,"@tonaljs/note":16,"@tonaljs/pcset":17,"@tonaljs/progression":18,"@tonaljs/range":19,"@tonaljs/roman-numeral":20,"@tonaljs/scale":22,"@tonaljs/scale-type":21}],24:[function(require,module,exports){(function(globalObject){"use strict";var BigNumber,isNumeric=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,mathceil=Math.ceil,mathfloor=Math.floor,bignumberError="[BigNumber Error] ",tooManyDigits=bignumberError+"Number primitive has more than 15 significant digits: ",BASE=1e14,LOG_BASE=14,MAX_SAFE_INTEGER=9007199254740991,POWS_TEN=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],SQRT_BASE=1e7,MAX=1e9;function clone(configObject){var div,convertBase,parseNumeric,P=BigNumber.prototype={constructor:BigNumber,toString:null,valueOf:null},ONE=new BigNumber(1),DECIMAL_PLACES=20,ROUNDING_MODE=4,TO_EXP_NEG=-7,TO_EXP_POS=21,MIN_EXP=-1e7,MAX_EXP=1e7,CRYPTO=false,MODULO_MODE=1,POW_PRECISION=0,FORMAT={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},ALPHABET="0123456789abcdefghijklmnopqrstuvwxyz";function BigNumber(v,b){var alphabet,c,caseChanged,e,i,isNum,len,str,x=this;if(!(x instanceof BigNumber))return new BigNumber(v,b);if(b==null){if(v&&v._isBigNumber===true){x.s=v.s;if(!v.c||v.e>MAX_EXP){x.c=x.e=null}else if(v.e<MIN_EXP){x.c=[x.e=0]}else{x.e=v.e;x.c=v.c.slice()}return}if((isNum=typeof v=="number")&&v*0==0){x.s=1/v<0?(v=-v,-1):1;if(v===~~v){for(e=0,i=v;i>=10;i/=10,e++){}if(e>MAX_EXP){x.c=x.e=null}else{x.e=e;x.c=[v]}return}str=String(v)}else{if(!isNumeric.test(str=String(v)))return parseNumeric(x,str,isNum);x.s=str.charCodeAt(0)==45?(str=str.slice(1),-1):1}if((e=str.indexOf("."))>-1)str=str.replace(".","");if((i=str.search(/e/i))>0){if(e<0)e=i;e+=+str.slice(i+1);str=str.substring(0,i)}else if(e<0){e=str.length}}else{intCheck(b,2,ALPHABET.length,"Base");if(b==10){x=new BigNumber(v);return round(x,DECIMAL_PLACES+x.e+1,ROUNDING_MODE)}str=String(v);if(isNum=typeof v=="number"){if(v*0!=0)return parseNumeric(x,str,isNum,b);x.s=1/v<0?(str=str.slice(1),-1):1;if(BigNumber.DEBUG&&str.replace(/^0\.0*|\./,"").length>15){throw Error(tooManyDigits+v)}}else{x.s=str.charCodeAt(0)===45?(str=str.slice(1),-1):1}alphabet=ALPHABET.slice(0,b);e=i=0;for(len=str.length;i<len;i++){if(alphabet.indexOf(c=str.charAt(i))<0){if(c=="."){if(i>e){e=len;continue}}else if(!caseChanged){if(str==str.toUpperCase()&&(str=str.toLowerCase())||str==str.toLowerCase()&&(str=str.toUpperCase())){caseChanged=true;i=-1;e=0;continue}}return parseNumeric(x,String(v),isNum,b)}}isNum=false;str=convertBase(str,b,10,x.s);if((e=str.indexOf("."))>-1)str=str.replace(".","");else e=str.length}for(i=0;str.charCodeAt(i)===48;i++){}for(len=str.length;str.charCodeAt(--len)===48;){}if(str=str.slice(i,++len)){len-=i;if(isNum&&BigNumber.DEBUG&&len>15&&(v>MAX_SAFE_INTEGER||v!==mathfloor(v))){throw Error(tooManyDigits+x.s*v)}if((e=e-i-1)>MAX_EXP){x.c=x.e=null}else if(e<MIN_EXP){x.c=[x.e=0]}else{x.e=e;x.c=[];i=(e+1)%LOG_BASE;if(e<0)i+=LOG_BASE;if(i<len){if(i)x.c.push(+str.slice(0,i));for(len-=LOG_BASE;i<len;){x.c.push(+str.slice(i,i+=LOG_BASE))}i=LOG_BASE-(str=str.slice(i)).length}else{i-=len}for(;i--;str+="0"){}x.c.push(+str)}}else{x.c=[x.e=0]}}BigNumber.clone=clone;BigNumber.ROUND_UP=0;BigNumber.ROUND_DOWN=1;BigNumber.ROUND_CEIL=2;BigNumber.ROUND_FLOOR=3;BigNumber.ROUND_HALF_UP=4;BigNumber.ROUND_HALF_DOWN=5;BigNumber.ROUND_HALF_EVEN=6;BigNumber.ROUND_HALF_CEIL=7;BigNumber.ROUND_HALF_FLOOR=8;BigNumber.EUCLID=9;BigNumber.config=BigNumber.set=function(obj){var p,v;if(obj!=null){if(_typeof(obj)=="object"){if(obj.hasOwnProperty(p="DECIMAL_PLACES")){v=obj[p];intCheck(v,0,MAX,p);DECIMAL_PLACES=v}if(obj.hasOwnProperty(p="ROUNDING_MODE")){v=obj[p];intCheck(v,0,8,p);ROUNDING_MODE=v}if(obj.hasOwnProperty(p="EXPONENTIAL_AT")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,0,p);intCheck(v[1],0,MAX,p);TO_EXP_NEG=v[0];TO_EXP_POS=v[1]}else{intCheck(v,-MAX,MAX,p);TO_EXP_NEG=-(TO_EXP_POS=v<0?-v:v)}}if(obj.hasOwnProperty(p="RANGE")){v=obj[p];if(v&&v.pop){intCheck(v[0],-MAX,-1,p);intCheck(v[1],1,MAX,p);MIN_EXP=v[0];MAX_EXP=v[1]}else{intCheck(v,-MAX,MAX,p);if(v){MIN_EXP=-(MAX_EXP=v<0?-v:v)}else{throw Error(bignumberError+p+" cannot be zero: "+v)}}}if(obj.hasOwnProperty(p="CRYPTO")){v=obj[p];if(v===!!v){if(v){if(typeof crypto!="undefined"&&crypto&&(crypto.getRandomValues||crypto.randomBytes)){CRYPTO=v}else{CRYPTO=!v;throw Error(bignumberError+"crypto unavailable")}}else{CRYPTO=v}}else{throw Error(bignumberError+p+" not true or false: "+v)}}if(obj.hasOwnProperty(p="MODULO_MODE")){v=obj[p];intCheck(v,0,9,p);MODULO_MODE=v}if(obj.hasOwnProperty(p="POW_PRECISION")){v=obj[p];intCheck(v,0,MAX,p);POW_PRECISION=v}if(obj.hasOwnProperty(p="FORMAT")){v=obj[p];if(_typeof(v)=="object")FORMAT=v;else throw Error(bignumberError+p+" not an object: "+v)}if(obj.hasOwnProperty(p="ALPHABET")){v=obj[p];if(typeof v=="string"&&!/^.$|[+-.\s]|(.).*\1/.test(v)){ALPHABET=v}else{throw Error(bignumberError+p+" invalid: "+v)}}}else{throw Error(bignumberError+"Object expected: "+obj)}}return{DECIMAL_PLACES:DECIMAL_PLACES,ROUNDING_MODE:ROUNDING_MODE,EXPONENTIAL_AT:[TO_EXP_NEG,TO_EXP_POS],RANGE:[MIN_EXP,MAX_EXP],CRYPTO:CRYPTO,MODULO_MODE:MODULO_MODE,POW_PRECISION:POW_PRECISION,FORMAT:FORMAT,ALPHABET:ALPHABET}};BigNumber.isBigNumber=function(v){if(!v||v._isBigNumber!==true)return false;if(!BigNumber.DEBUG)return true;var i,n,c=v.c,e=v.e,s=v.s;out:if({}.toString.call(c)=="[object Array]"){if((s===1||s===-1)&&e>=-MAX&&e<=MAX&&e===mathfloor(e)){if(c[0]===0){if(e===0&&c.length===1)return true;break out}i=(e+1)%LOG_BASE;if(i<1)i+=LOG_BASE;if(String(c[0]).length==i){for(i=0;i<c.length;i++){n=c[i];if(n<0||n>=BASE||n!==mathfloor(n))break out}if(n!==0)return true}}}else if(c===null&&e===null&&(s===null||s===1||s===-1)){return true}throw Error(bignumberError+"Invalid BigNumber: "+v)};BigNumber.maximum=BigNumber.max=function(){return maxOrMin(arguments,P.lt)};BigNumber.minimum=BigNumber.min=function(){return maxOrMin(arguments,P.gt)};BigNumber.random=function(){var pow2_53=9007199254740992;var random53bitInt=Math.random()*pow2_53&2097151?function(){return mathfloor(Math.random()*pow2_53)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(dp){var a,b,e,k,v,i=0,c=[],rand=new BigNumber(ONE);if(dp==null)dp=DECIMAL_PLACES;else intCheck(dp,0,MAX);k=mathceil(dp/LOG_BASE);if(CRYPTO){if(crypto.getRandomValues){a=crypto.getRandomValues(new Uint32Array(k*=2));for(;i<k;){v=a[i]*131072+(a[i+1]>>>11);if(v>=9e15){b=crypto.getRandomValues(new Uint32Array(2));a[i]=b[0];a[i+1]=b[1]}else{c.push(v%1e14);i+=2}}i=k/2}else if(crypto.randomBytes){a=crypto.randomBytes(k*=7);for(;i<k;){v=(a[i]&31)*281474976710656+a[i+1]*1099511627776+a[i+2]*4294967296+a[i+3]*16777216+(a[i+4]<<16)+(a[i+5]<<8)+a[i+6];if(v>=9e15){crypto.randomBytes(7).copy(a,i)}else{c.push(v%1e14);i+=7}}i=k/7}else{CRYPTO=false;throw Error(bignumberError+"crypto unavailable")}}if(!CRYPTO){for(;i<k;){v=random53bitInt();if(v<9e15)c[i++]=v%1e14}}k=c[--i];dp%=LOG_BASE;if(k&&dp){v=POWS_TEN[LOG_BASE-dp];c[i]=mathfloor(k/v)*v}for(;c[i]===0;c.pop(),i--){}if(i<0){c=[e=0]}else{for(e=-1;c[0]===0;c.splice(0,1),e-=LOG_BASE){}for(i=1,v=c[0];v>=10;v/=10,i++){}if(i<LOG_BASE)e-=LOG_BASE-i}rand.e=e;rand.c=c;return rand}}();BigNumber.sum=function(){var i=1,args=arguments,sum=new BigNumber(args[0]);for(;i<args.length;){sum=sum.plus(args[i++])}return sum};convertBase=function(){var decimal="0123456789";function toBaseOut(str,baseIn,baseOut,alphabet){var j,arr=[0],arrL,i=0,len=str.length;for(;i<len;){for(arrL=arr.length;arrL--;arr[arrL]*=baseIn){}arr[0]+=alphabet.indexOf(str.charAt(i++));for(j=0;j<arr.length;j++){if(arr[j]>baseOut-1){if(arr[j+1]==null)arr[j+1]=0;arr[j+1]+=arr[j]/baseOut|0;arr[j]%=baseOut}}}return arr.reverse()}return function(str,baseIn,baseOut,sign,callerIsToString){var alphabet,d,e,k,r,x,xc,y,i=str.indexOf("."),dp=DECIMAL_PLACES,rm=ROUNDING_MODE;if(i>=0){k=POW_PRECISION;POW_PRECISION=0;str=str.replace(".","");y=new BigNumber(baseIn);x=y.pow(str.length-i);POW_PRECISION=k;y.c=toBaseOut(toFixedPoint(coeffToString(x.c),x.e,"0"),10,baseOut,decimal);y.e=y.c.length}xc=toBaseOut(str,baseIn,baseOut,callerIsToString?(alphabet=ALPHABET,decimal):(alphabet=decimal,ALPHABET));e=k=xc.length;for(;xc[--k]==0;xc.pop()){}if(!xc[0])return alphabet.charAt(0);if(i<0){--e}else{x.c=xc;x.e=e;x.s=sign;x=div(x,y,dp,rm,baseOut);xc=x.c;r=x.r;e=x.e}d=e+dp+1;i=xc[d];k=baseOut/2;r=r||d<0||xc[d+1]!=null;r=rm<4?(i!=null||r)&&(rm==0||rm==(x.s<0?3:2)):i>k||i==k&&(rm==4||r||rm==6&&xc[d-1]&1||rm==(x.s<0?8:7));if(d<1||!xc[0]){str=r?toFixedPoint(alphabet.charAt(1),-dp,alphabet.charAt(0)):alphabet.charAt(0)}else{xc.length=d;if(r){for(--baseOut;++xc[--d]>baseOut;){xc[d]=0;if(!d){++e;xc=[1].concat(xc)}}}for(k=xc.length;!xc[--k];){}for(i=0,str="";i<=k;str+=alphabet.charAt(xc[i++])){}str=toFixedPoint(str,e,alphabet.charAt(0))}return str}}();div=function(){function multiply(x,k,base){var m,temp,xlo,xhi,carry=0,i=x.length,klo=k%SQRT_BASE,khi=k/SQRT_BASE|0;for(x=x.slice();i--;){xlo=x[i]%SQRT_BASE;xhi=x[i]/SQRT_BASE|0;m=khi*xlo+xhi*klo;temp=klo*xlo+m%SQRT_BASE*SQRT_BASE+carry;carry=(temp/base|0)+(m/SQRT_BASE|0)+khi*xhi;x[i]=temp%base}if(carry)x=[carry].concat(x);return x}function compare(a,b,aL,bL){var i,cmp;if(aL!=bL){cmp=aL>bL?1:-1}else{for(i=cmp=0;i<aL;i++){if(a[i]!=b[i]){cmp=a[i]>b[i]?1:-1;break}}}return cmp}function subtract(a,b,aL,base){var i=0;for(;aL--;){a[aL]-=i;i=a[aL]<b[aL]?1:0;a[aL]=i*base+a[aL]-b[aL]}for(;!a[0]&&a.length>1;a.splice(0,1)){}}return function(x,y,dp,rm,base){var cmp,e,i,more,n,prod,prodL,q,qc,rem,remL,rem0,xi,xL,yc0,yL,yz,s=x.s==y.s?1:-1,xc=x.c,yc=y.c;if(!xc||!xc[0]||!yc||!yc[0]){return new BigNumber(!x.s||!y.s||(xc?yc&&xc[0]==yc[0]:!yc)?NaN:xc&&xc[0]==0||!yc?s*0:s/0)}q=new BigNumber(s);qc=q.c=[];e=x.e-y.e;s=dp+e+1;if(!base){base=BASE;e=bitFloor(x.e/LOG_BASE)-bitFloor(y.e/LOG_BASE);s=s/LOG_BASE|0}for(i=0;yc[i]==(xc[i]||0);i++){}if(yc[i]>(xc[i]||0))e--;if(s<0){qc.push(1);more=true}else{xL=xc.length;yL=yc.length;i=0;s+=2;n=mathfloor(base/(yc[0]+1));if(n>1){yc=multiply(yc,n,base);xc=multiply(xc,n,base);yL=yc.length;xL=xc.length}xi=yL;rem=xc.slice(0,yL);remL=rem.length;for(;remL<yL;rem[remL++]=0){}yz=yc.slice();yz=[0].concat(yz);yc0=yc[0];if(yc[1]>=base/2)yc0++;do{n=0;cmp=compare(yc,rem,yL,remL);if(cmp<0){rem0=rem[0];if(yL!=remL)rem0=rem0*base+(rem[1]||0);n=mathfloor(rem0/yc0);if(n>1){if(n>=base)n=base-1;prod=multiply(yc,n,base);prodL=prod.length;remL=rem.length;while(compare(prod,rem,prodL,remL)==1){n--;subtract(prod,yL<prodL?yz:yc,prodL,base);prodL=prod.length;cmp=1}}else{if(n==0){cmp=n=1}prod=yc.slice();prodL=prod.length}if(prodL<remL)prod=[0].concat(prod);subtract(rem,prod,remL,base);remL=rem.length;if(cmp==-1){while(compare(yc,rem,yL,remL)<1){n++;subtract(rem,yL<remL?yz:yc,remL,base);remL=rem.length}}}else if(cmp===0){n++;rem=[0]}qc[i++]=n;if(rem[0]){rem[remL++]=xc[xi]||0}else{rem=[xc[xi]];remL=1}}while((xi++<xL||rem[0]!=null)&&s--);more=rem[0]!=null;if(!qc[0])qc.splice(0,1)}if(base==BASE){for(i=1,s=qc[0];s>=10;s/=10,i++){}round(q,dp+(q.e=i+e*LOG_BASE-1)+1,rm,more)}else{q.e=e;q.r=+more}return q}}();function format(n,i,rm,id){var c0,e,ne,len,str;if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);if(!n.c)return n.toString();c0=n.c[0];ne=n.e;if(i==null){str=coeffToString(n.c);str=id==1||id==2&&(ne<=TO_EXP_NEG||ne>=TO_EXP_POS)?toExponential(str,ne):toFixedPoint(str,ne,"0")}else{n=round(new BigNumber(n),i,rm);e=n.e;str=coeffToString(n.c);len=str.length;if(id==1||id==2&&(i<=e||e<=TO_EXP_NEG)){for(;len<i;str+="0",len++){}str=toExponential(str,e)}else{i-=ne;str=toFixedPoint(str,e,"0");if(e+1>len){if(--i>0)for(str+=".";i--;str+="0"){}}else{i+=e-len;if(i>0){if(e+1==len)str+=".";for(;i--;str+="0"){}}}}}return n.s<0&&c0?"-"+str:str}function maxOrMin(args,method){var n,i=1,m=new BigNumber(args[0]);for(;i<args.length;i++){n=new BigNumber(args[i]);if(!n.s){m=n;break}else if(method.call(m,n)){m=n}}return m}function normalise(n,c,e){var i=1,j=c.length;for(;!c[--j];c.pop()){}for(j=c[0];j>=10;j/=10,i++){}if((e=i+e*LOG_BASE-1)>MAX_EXP){n.c=n.e=null}else if(e<MIN_EXP){n.c=[n.e=0]}else{n.e=e;n.c=c}return n}parseNumeric=function(){var basePrefix=/^(-?)0([xbo])(?=\w[\w.]*$)/i,dotAfter=/^([^.]+)\.$/,dotBefore=/^\.([^.]+)$/,isInfinityOrNaN=/^-?(Infinity|NaN)$/,whitespaceOrPlus=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(x,str,isNum,b){var base,s=isNum?str:str.replace(whitespaceOrPlus,"");if(isInfinityOrNaN.test(s)){x.s=isNaN(s)?null:s<0?-1:1}else{if(!isNum){s=s.replace(basePrefix,function(m,p1,p2){base=(p2=p2.toLowerCase())=="x"?16:p2=="b"?2:8;return!b||b==base?p1:m});if(b){base=b;s=s.replace(dotAfter,"$1").replace(dotBefore,"0.$1")}if(str!=s)return new BigNumber(s,base)}if(BigNumber.DEBUG){throw Error(bignumberError+"Not a"+(b?" base "+b:"")+" number: "+str)}x.s=null}x.c=x.e=null}}();function round(x,sd,rm,r){var d,i,j,k,n,ni,rd,xc=x.c,pows10=POWS_TEN;if(xc){out:{for(d=1,k=xc[0];k>=10;k/=10,d++){}i=sd-d;if(i<0){i+=LOG_BASE;j=sd;n=xc[ni=0];rd=n/pows10[d-j-1]%10|0}else{ni=mathceil((i+1)/LOG_BASE);if(ni>=xc.length){if(r){for(;xc.length<=ni;xc.push(0)){}n=rd=0;d=1;i%=LOG_BASE;j=i-LOG_BASE+1}else{break out}}else{n=k=xc[ni];for(d=1;k>=10;k/=10,d++){}i%=LOG_BASE;j=i-LOG_BASE+d;rd=j<0?0:n/pows10[d-j-1]%10|0}}r=r||sd<0||xc[ni+1]!=null||(j<0?n:n%pows10[d-j-1]);r=rm<4?(rd||r)&&(rm==0||rm==(x.s<0?3:2)):rd>5||rd==5&&(rm==4||r||rm==6&&(i>0?j>0?n/pows10[d-j]:0:xc[ni-1])%10&1||rm==(x.s<0?8:7));if(sd<1||!xc[0]){xc.length=0;if(r){sd-=x.e+1;xc[0]=pows10[(LOG_BASE-sd%LOG_BASE)%LOG_BASE];x.e=-sd||0}else{xc[0]=x.e=0}return x}if(i==0){xc.length=ni;k=1;ni--}else{xc.length=ni+1;k=pows10[LOG_BASE-i];xc[ni]=j>0?mathfloor(n/pows10[d-j]%pows10[j])*k:0}if(r){for(;;){if(ni==0){for(i=1,j=xc[0];j>=10;j/=10,i++){}j=xc[0]+=k;for(k=1;j>=10;j/=10,k++){}if(i!=k){x.e++;if(xc[0]==BASE)xc[0]=1}break}else{xc[ni]+=k;if(xc[ni]!=BASE)break;xc[ni--]=0;k=1}}}for(i=xc.length;xc[--i]===0;xc.pop()){}}if(x.e>MAX_EXP){x.c=x.e=null}else if(x.e<MIN_EXP){x.c=[x.e=0]}}return x}function valueOf(n){var str,e=n.e;if(e===null)return n.toString();str=coeffToString(n.c);str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(str,e):toFixedPoint(str,e,"0");return n.s<0?"-"+str:str}P.absoluteValue=P.abs=function(){var x=new BigNumber(this);if(x.s<0)x.s=1;return x};P.comparedTo=function(y,b){return compare(this,new BigNumber(y,b))};P.decimalPlaces=P.dp=function(dp,rm){var c,n,v,x=this;if(dp!=null){intCheck(dp,0,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),dp+x.e+1,rm)}if(!(c=x.c))return null;n=((v=c.length-1)-bitFloor(this.e/LOG_BASE))*LOG_BASE;if(v=c[v])for(;v%10==0;v/=10,n--){}if(n<0)n=0;return n};P.dividedBy=P.div=function(y,b){return div(this,new BigNumber(y,b),DECIMAL_PLACES,ROUNDING_MODE)};P.dividedToIntegerBy=P.idiv=function(y,b){return div(this,new BigNumber(y,b),0,1)};P.exponentiatedBy=P.pow=function(n,m){var half,isModExp,i,k,more,nIsBig,nIsNeg,nIsOdd,y,x=this;n=new BigNumber(n);if(n.c&&!n.isInteger()){throw Error(bignumberError+"Exponent not an integer: "+valueOf(n))}if(m!=null)m=new BigNumber(m);nIsBig=n.e>14;if(!x.c||!x.c[0]||x.c[0]==1&&!x.e&&x.c.length==1||!n.c||!n.c[0]){y=new BigNumber(Math.pow(+valueOf(x),nIsBig?2-isOdd(n):+valueOf(n)));return m?y.mod(m):y}nIsNeg=n.s<0;if(m){if(m.c?!m.c[0]:!m.s)return new BigNumber(NaN);isModExp=!nIsNeg&&x.isInteger()&&m.isInteger();if(isModExp)x=x.mod(m)}else if(n.e>9&&(x.e>0||x.e<-1||(x.e==0?x.c[0]>1||nIsBig&&x.c[1]>=24e7:x.c[0]<8e13||nIsBig&&x.c[0]<=9999975e7))){k=x.s<0&&isOdd(n)?-0:0;if(x.e>-1)k=1/k;return new BigNumber(nIsNeg?1/k:k)}else if(POW_PRECISION){k=mathceil(POW_PRECISION/LOG_BASE+2)}if(nIsBig){half=new BigNumber(.5);if(nIsNeg)n.s=1;nIsOdd=isOdd(n)}else{i=Math.abs(+valueOf(n));nIsOdd=i%2}y=new BigNumber(ONE);for(;;){if(nIsOdd){y=y.times(x);if(!y.c)break;if(k){if(y.c.length>k)y.c.length=k}else if(isModExp){y=y.mod(m)}}if(i){i=mathfloor(i/2);if(i===0)break;nIsOdd=i%2}else{n=n.times(half);round(n,n.e+1,1);if(n.e>14){nIsOdd=isOdd(n)}else{i=+valueOf(n);if(i===0)break;nIsOdd=i%2}}x=x.times(x);if(k){if(x.c&&x.c.length>k)x.c.length=k}else if(isModExp){x=x.mod(m)}}if(isModExp)return y;if(nIsNeg)y=ONE.div(y);return m?y.mod(m):k?round(y,POW_PRECISION,ROUNDING_MODE,more):y};P.integerValue=function(rm){var n=new BigNumber(this);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(n,n.e+1,rm)};P.isEqualTo=P.eq=function(y,b){return compare(this,new BigNumber(y,b))===0};P.isFinite=function(){return!!this.c};P.isGreaterThan=P.gt=function(y,b){return compare(this,new BigNumber(y,b))>0};P.isGreaterThanOrEqualTo=P.gte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===1||b===0};P.isInteger=function(){return!!this.c&&bitFloor(this.e/LOG_BASE)>this.c.length-2};P.isLessThan=P.lt=function(y,b){return compare(this,new BigNumber(y,b))<0};P.isLessThanOrEqualTo=P.lte=function(y,b){return(b=compare(this,new BigNumber(y,b)))===-1||b===0};P.isNaN=function(){return!this.s};P.isNegative=function(){return this.s<0};P.isPositive=function(){return this.s>0};P.isZero=function(){return!!this.c&&this.c[0]==0};P.minus=function(y,b){var i,j,t,xLTy,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.plus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return xc?(y.s=-b,y):new BigNumber(yc?x:NaN);if(!xc[0]||!yc[0]){return yc[0]?(y.s=-b,y):new BigNumber(xc[0]?x:ROUNDING_MODE==3?-0:0)}}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(xLTy=a<0){a=-a;t=xc}else{ye=xe;t=yc}t.reverse();for(b=a;b--;t.push(0)){}t.reverse()}else{j=(xLTy=(a=xc.length)<(b=yc.length))?a:b;for(a=b=0;b<j;b++){if(xc[b]!=yc[b]){xLTy=xc[b]<yc[b];break}}}if(xLTy)t=xc,xc=yc,yc=t,y.s=-y.s;b=(j=yc.length)-(i=xc.length);if(b>0)for(;b--;xc[i++]=0){}b=BASE-1;for(;j>a;){if(xc[--j]<yc[j]){for(i=j;i&&!xc[--i];xc[i]=b){}--xc[i];xc[j]+=BASE}xc[j]-=yc[j]}for(;xc[0]==0;xc.splice(0,1),--ye){}if(!xc[0]){y.s=ROUNDING_MODE==3?-1:1;y.c=[y.e=0];return y}return normalise(y,xc,ye)};P.modulo=P.mod=function(y,b){var q,s,x=this;y=new BigNumber(y,b);if(!x.c||!y.s||y.c&&!y.c[0]){return new BigNumber(NaN)}else if(!y.c||x.c&&!x.c[0]){return new BigNumber(x)}if(MODULO_MODE==9){s=y.s;y.s=1;q=div(x,y,0,3);y.s=s;q.s*=s}else{q=div(x,y,0,MODULO_MODE)}y=x.minus(q.times(y));if(!y.c[0]&&MODULO_MODE==1)y.s=x.s;return y};P.multipliedBy=P.times=function(y,b){var c,e,i,j,k,m,xcL,xlo,xhi,ycL,ylo,yhi,zc,base,sqrtBase,x=this,xc=x.c,yc=(y=new BigNumber(y,b)).c;if(!xc||!yc||!xc[0]||!yc[0]){if(!x.s||!y.s||xc&&!xc[0]&&!yc||yc&&!yc[0]&&!xc){y.c=y.e=y.s=null}else{y.s*=x.s;if(!xc||!yc){y.c=y.e=null}else{y.c=[0];y.e=0}}return y}e=bitFloor(x.e/LOG_BASE)+bitFloor(y.e/LOG_BASE);y.s*=x.s;xcL=xc.length;ycL=yc.length;if(xcL<ycL)zc=xc,xc=yc,yc=zc,i=xcL,xcL=ycL,ycL=i;for(i=xcL+ycL,zc=[];i--;zc.push(0)){}base=BASE;sqrtBase=SQRT_BASE;for(i=ycL;--i>=0;){c=0;ylo=yc[i]%sqrtBase;yhi=yc[i]/sqrtBase|0;for(k=xcL,j=i+k;j>i;){xlo=xc[--k]%sqrtBase;xhi=xc[k]/sqrtBase|0;m=yhi*xlo+xhi*ylo;xlo=ylo*xlo+m%sqrtBase*sqrtBase+zc[j]+c;c=(xlo/base|0)+(m/sqrtBase|0)+yhi*xhi;zc[j--]=xlo%base}zc[j]=c}if(c){++e}else{zc.splice(0,1)}return normalise(y,zc,e)};P.negated=function(){var x=new BigNumber(this);x.s=-x.s||null;return x};P.plus=function(y,b){var t,x=this,a=x.s;y=new BigNumber(y,b);b=y.s;if(!a||!b)return new BigNumber(NaN);if(a!=b){y.s=-b;return x.minus(y)}var xe=x.e/LOG_BASE,ye=y.e/LOG_BASE,xc=x.c,yc=y.c;if(!xe||!ye){if(!xc||!yc)return new BigNumber(a/0);if(!xc[0]||!yc[0])return yc[0]?y:new BigNumber(xc[0]?x:a*0)}xe=bitFloor(xe);ye=bitFloor(ye);xc=xc.slice();if(a=xe-ye){if(a>0){ye=xe;t=yc}else{a=-a;t=xc}t.reverse();for(;a--;t.push(0)){}t.reverse()}a=xc.length;b=yc.length;if(a-b<0)t=yc,yc=xc,xc=t,b=a;for(a=0;b;){a=(xc[--b]=xc[b]+yc[b]+a)/BASE|0;xc[b]=BASE===xc[b]?0:xc[b]%BASE}if(a){xc=[a].concat(xc);++ye}return normalise(y,xc,ye)};P.precision=P.sd=function(sd,rm){var c,n,v,x=this;if(sd!=null&&sd!==!!sd){intCheck(sd,1,MAX);if(rm==null)rm=ROUNDING_MODE;else intCheck(rm,0,8);return round(new BigNumber(x),sd,rm)}if(!(c=x.c))return null;v=c.length-1;n=v*LOG_BASE+1;if(v=c[v]){for(;v%10==0;v/=10,n--){}for(v=c[0];v>=10;v/=10,n++){}}if(sd&&x.e+1>n)n=x.e+1;return n};P.shiftedBy=function(k){intCheck(k,-MAX_SAFE_INTEGER,MAX_SAFE_INTEGER);return this.times("1e"+k)};P.squareRoot=P.sqrt=function(){var m,n,r,rep,t,x=this,c=x.c,s=x.s,e=x.e,dp=DECIMAL_PLACES+4,half=new BigNumber("0.5");if(s!==1||!c||!c[0]){return new BigNumber(!s||s<0&&(!c||c[0])?NaN:c?x:1/0)}s=Math.sqrt(+valueOf(x));if(s==0||s==1/0){n=coeffToString(c);if((n.length+e)%2==0)n+="0";s=Math.sqrt(+n);e=bitFloor((e+1)/2)-(e<0||e%2);if(s==1/0){n="1e"+e}else{n=s.toExponential();n=n.slice(0,n.indexOf("e")+1)+e}r=new BigNumber(n)}else{r=new BigNumber(s+"")}if(r.c[0]){e=r.e;s=e+dp;if(s<3)s=0;for(;;){t=r;r=half.times(t.plus(div(x,t,dp,1)));if(coeffToString(t.c).slice(0,s)===(n=coeffToString(r.c)).slice(0,s)){if(r.e<e)--s;n=n.slice(s-3,s+1);if(n=="9999"||!rep&&n=="4999"){if(!rep){round(t,t.e+DECIMAL_PLACES+2,0);if(t.times(t).eq(x)){r=t;break}}dp+=4;s+=4;rep=1}else{if(!+n||!+n.slice(1)&&n.charAt(0)=="5"){round(r,r.e+DECIMAL_PLACES+2,1);m=!r.times(r).eq(x)}break}}}}return round(r,r.e+DECIMAL_PLACES+1,ROUNDING_MODE,m)};P.toExponential=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp++}return format(this,dp,rm,1)};P.toFixed=function(dp,rm){if(dp!=null){intCheck(dp,0,MAX);dp=dp+this.e+1}return format(this,dp,rm)};P.toFormat=function(dp,rm,format){var str,x=this;if(format==null){if(dp!=null&&rm&&_typeof(rm)=="object"){format=rm;rm=null}else if(dp&&_typeof(dp)=="object"){format=dp;dp=rm=null}else{format=FORMAT}}else if(_typeof(format)!="object"){throw Error(bignumberError+"Argument not an object: "+format)}str=x.toFixed(dp,rm);if(x.c){var i,arr=str.split("."),g1=+format.groupSize,g2=+format.secondaryGroupSize,groupSeparator=format.groupSeparator||"",intPart=arr[0],fractionPart=arr[1],isNeg=x.s<0,intDigits=isNeg?intPart.slice(1):intPart,len=intDigits.length;if(g2)i=g1,g1=g2,g2=i,len-=i;if(g1>0&&len>0){i=len%g1||g1;intPart=intDigits.substr(0,i);for(;i<len;i+=g1){intPart+=groupSeparator+intDigits.substr(i,g1)}if(g2>0)intPart+=groupSeparator+intDigits.slice(i);if(isNeg)intPart="-"+intPart}str=fractionPart?intPart+(format.decimalSeparator||"")+((g2=+format.fractionGroupSize)?fractionPart.replace(new RegExp("\\d{"+g2+"}\\B","g"),"$&"+(format.fractionGroupSeparator||"")):fractionPart):intPart}return(format.prefix||"")+str+(format.suffix||"")};P.toFraction=function(md){var d,d0,d1,d2,e,exp,n,n0,n1,q,r,s,x=this,xc=x.c;if(md!=null){n=new BigNumber(md);if(!n.isInteger()&&(n.c||n.s!==1)||n.lt(ONE)){throw Error(bignumberError+"Argument "+(n.isInteger()?"out of range: ":"not an integer: ")+valueOf(n))}}if(!xc)return new BigNumber(x);d=new BigNumber(ONE);n1=d0=new BigNumber(ONE);d1=n0=new BigNumber(ONE);s=coeffToString(xc);e=d.e=s.length-x.e-1;d.c[0]=POWS_TEN[(exp=e%LOG_BASE)<0?LOG_BASE+exp:exp];md=!md||n.comparedTo(d)>0?e>0?d:n1:n;exp=MAX_EXP;MAX_EXP=1/0;n=new BigNumber(s);n0.c[0]=0;for(;;){q=div(n,d,0,1);d2=d0.plus(q.times(d1));if(d2.comparedTo(md)==1)break;d0=d1;d1=d2;n1=n0.plus(q.times(d2=n1));n0=d2;d=n.minus(q.times(d2=d));n=d2}d2=div(md.minus(d0),d1,0,1);n0=n0.plus(d2.times(n1));d0=d0.plus(d2.times(d1));n0.s=n1.s=x.s;e=e*2;r=div(n1,d1,e,ROUNDING_MODE).minus(x).abs().comparedTo(div(n0,d0,e,ROUNDING_MODE).minus(x).abs())<1?[n1,d1]:[n0,d0];MAX_EXP=exp;return r};P.toNumber=function(){return+valueOf(this)};P.toPrecision=function(sd,rm){if(sd!=null)intCheck(sd,1,MAX);return format(this,sd,rm,2)};P.toString=function(b){var str,n=this,s=n.s,e=n.e;if(e===null){if(s){str="Infinity";if(s<0)str="-"+str}else{str="NaN"}}else{if(b==null){str=e<=TO_EXP_NEG||e>=TO_EXP_POS?toExponential(coeffToString(n.c),e):toFixedPoint(coeffToString(n.c),e,"0")}else if(b===10){n=round(new BigNumber(n),DECIMAL_PLACES+e+1,ROUNDING_MODE);str=toFixedPoint(coeffToString(n.c),n.e,"0")}else{intCheck(b,2,ALPHABET.length,"Base");str=convertBase(toFixedPoint(coeffToString(n.c),e,"0"),10,b,s,true)}if(s<0&&n.c[0])str="-"+str}return str};P.valueOf=P.toJSON=function(){return valueOf(this)};P._isBigNumber=true;if(configObject!=null)BigNumber.set(configObject);return BigNumber}function bitFloor(n){var i=n|0;return n>0||n===i?i:i-1}function coeffToString(a){var s,z,i=1,j=a.length,r=a[0]+"";for(;i<j;){s=a[i++]+"";z=LOG_BASE-s.length;for(;z--;s="0"+s){}r+=s}for(j=r.length;r.charCodeAt(--j)===48;){}return r.slice(0,j+1||1)}function compare(x,y){var a,b,xc=x.c,yc=y.c,i=x.s,j=y.s,k=x.e,l=y.e;if(!i||!j)return null;a=xc&&!xc[0];b=yc&&!yc[0];if(a||b)return a?b?0:-j:i;if(i!=j)return i;a=i<0;b=k==l;if(!xc||!yc)return b?0:!xc^a?1:-1;if(!b)return k>l^a?1:-1;j=(k=xc.length)<(l=yc.length)?k:l;for(i=0;i<j;i++){if(xc[i]!=yc[i])return xc[i]>yc[i]^a?1:-1}return k==l?0:k>l^a?1:-1}function intCheck(n,min,max,name){if(n<min||n>max||n!==mathfloor(n)){throw Error(bignumberError+(name||"Argument")+(typeof n=="number"?n<min||n>max?" out of range: ":" not an integer: ":" not a primitive number: ")+String(n))}}function isOdd(n){var k=n.c.length-1;return bitFloor(n.e/LOG_BASE)==k&&n.c[k]%2!=0}function toExponential(str,e){return(str.length>1?str.charAt(0)+"."+str.slice(1):str)+(e<0?"e":"e+")+e}function toFixedPoint(str,e,z){var len,zs;if(e<0){for(zs=z+".";++e;zs+=z){}str=zs+str}else{len=str.length;if(++e>len){for(zs=z,e-=len;--e;zs+=z){}str+=zs}else if(e<len){str=str.slice(0,e)+"."+str.slice(e)}}return str}BigNumber=clone();BigNumber["default"]=BigNumber.BigNumber=BigNumber;if(typeof define=="function"&&define.amd){define(function(){return BigNumber})}else if(typeof module!="undefined"&&module.exports){module.exports=BigNumber}else{if(!globalObject){globalObject=typeof self!="undefined"&&self?self:window}globalObject.BigNumber=BigNumber}})(this)},{}],25:[function(require,module,exports){},{}],26:[function(require,module,exports){var alea=require("./lib/alea");var xor128=require("./lib/xor128");var xorwow=require("./lib/xorwow");var xorshift7=require("./lib/xorshift7");var xor4096=require("./lib/xor4096");var tychei=require("./lib/tychei");var sr=require("./seedrandom");sr.alea=alea;sr.xor128=xor128;sr.xorwow=xorwow;sr.xorshift7=xorshift7;sr.xor4096=xor4096;sr.tychei=tychei;module.exports=sr},{"./lib/alea":27,"./lib/tychei":28,"./lib/xor128":29,"./lib/xor4096":30,"./lib/xorshift7":31,"./lib/xorwow":32,"./seedrandom":33}],27:[function(require,module,exports){(function(global,module,define){function Alea(seed){var me=this,mash=Mash();me.next=function(){var t=2091639*me.s0+me.c*2.3283064365386963e-10;me.s0=me.s1;me.s1=me.s2;return me.s2=t-(me.c=t|0)};me.c=1;me.s0=mash(" ");me.s1=mash(" ");me.s2=mash(" ");me.s0-=mash(seed);if(me.s0<0){me.s0+=1}me.s1-=mash(seed);if(me.s1<0){me.s1+=1}me.s2-=mash(seed);if(me.s2<0){me.s2+=1}mash=null}function copy(f,t){t.c=f.c;t.s0=f.s0;t.s1=f.s1;t.s2=f.s2;return t}function impl(seed,opts){var xg=new Alea(seed),state=opts&&opts.state,prng=xg.next;prng.int32=function(){return xg.next()*4294967296|0};prng["double"]=function(){return prng()+(prng()*2097152|0)*11102230246251565e-32};prng.quick=prng;if(state){if(_typeof(state)=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}function Mash(){var n=4022871197;var mash=function mash(data){data=String(data);for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*4294967296}return(n>>>0)*2.3283064365386963e-10};return mash}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.alea=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],28:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.next=function(){var b=me.b,c=me.c,d=me.d,a=me.a;b=b<<25^b>>>7^c;c=c-d|0;d=d<<24^d>>>8^a;a=a-b|0;me.b=b=b<<20^b>>>12^c;me.c=c=c-d|0;me.d=d<<16^c>>>16^a;return me.a=a-b|0};me.a=0;me.b=0;me.c=2654435769|0;me.d=1367130551;if(seed===Math.floor(seed)){me.a=seed/4294967296|0;me.b=seed|0}else{strseed+=seed}for(var k=0;k<strseed.length+20;k++){me.b^=strseed.charCodeAt(k)|0;me.next()}}function copy(f,t){t.a=f.a;t.b=f.b;t.c=f.c;t.d=f.d;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function prng(){return(xg.next()>>>0)/4294967296};prng["double"]=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(_typeof(state)=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.tychei=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],29:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.x=0;me.y=0;me.z=0;me.w=0;me.next=function(){var t=me.x^me.x<<11;me.x=me.y;me.y=me.z;me.z=me.w;return me.w^=me.w>>>19^t^t>>>8};if(seed===(seed|0)){me.x=seed}else{strseed+=seed}for(var k=0;k<strseed.length+64;k++){me.x^=strseed.charCodeAt(k)|0;me.next()}}function copy(f,t){t.x=f.x;t.y=f.y;t.z=f.z;t.w=f.w;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function prng(){return(xg.next()>>>0)/4294967296};prng["double"]=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(_typeof(state)=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xor128=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],30:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this;me.next=function(){var w=me.w,X=me.X,i=me.i,t,v;me.w=w=w+1640531527|0;v=X[i+34&127];t=X[i=i+1&127];v^=v<<13;t^=t<<17;v^=v>>>15;t^=t>>>12;v=X[i]=v^t;me.i=i;return v+(w^w>>>16)|0};function init(me,seed){var t,v,i,j,w,X=[],limit=128;if(seed===(seed|0)){v=seed;seed=null}else{seed=seed+"\0";v=0;limit=Math.max(limit,seed.length)}for(i=0,j=-32;j<limit;++j){if(seed)v^=seed.charCodeAt((j+32)%seed.length);if(j===0)w=v;v^=v<<10;v^=v>>>15;v^=v<<4;v^=v>>>13;if(j>=0){w=w+1640531527|0;t=X[j&127]^=v+w;i=0==t?i+1:0}}if(i>=128){X[(seed&&seed.length||0)&127]=-1}i=127;for(j=4*128;j>0;--j){v=X[i+34&127];t=X[i=i+1&127];v^=v<<13;t^=t<<17;v^=v>>>15;t^=t>>>12;X[i]=v^t}me.w=w;me.X=X;me.i=i}init(me,seed)}function copy(f,t){t.i=f.i;t.w=f.w;t.X=f.X.slice();return t}function impl(seed,opts){if(seed==null)seed=+new Date;var xg=new XorGen(seed),state=opts&&opts.state,prng=function prng(){return(xg.next()>>>0)/4294967296};prng["double"]=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(state.X)copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xor4096=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],31:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this;me.next=function(){var X=me.x,i=me.i,t,v,w;t=X[i];t^=t>>>7;v=t^t<<24;t=X[i+1&7];v^=t^t>>>10;t=X[i+3&7];v^=t^t>>>3;t=X[i+4&7];v^=t^t<<7;t=X[i+7&7];t=t^t<<13;v^=t^t<<9;X[i]=v;me.i=i+1&7;return v};function init(me,seed){var j,w,X=[];if(seed===(seed|0)){w=X[0]=seed}else{seed=""+seed;for(j=0;j<seed.length;++j){X[j&7]=X[j&7]<<15^seed.charCodeAt(j)+X[j+1&7]<<13}}while(X.length<8){X.push(0)}for(j=0;j<8&&X[j]===0;++j){}if(j==8)w=X[7]=-1;else w=X[j];me.x=X;me.i=0;for(j=256;j>0;--j){me.next()}}init(me,seed)}function copy(f,t){t.x=f.x.slice();t.i=f.i;return t}function impl(seed,opts){if(seed==null)seed=+new Date;var xg=new XorGen(seed),state=opts&&opts.state,prng=function prng(){return(xg.next()>>>0)/4294967296};prng["double"]=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(state.x)copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xorshift7=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],32:[function(require,module,exports){(function(global,module,define){function XorGen(seed){var me=this,strseed="";me.next=function(){var t=me.x^me.x>>>2;me.x=me.y;me.y=me.z;me.z=me.w;me.w=me.v;return(me.d=me.d+362437|0)+(me.v=me.v^me.v<<4^(t^t<<1))|0};me.x=0;me.y=0;me.z=0;me.w=0;me.v=0;if(seed===(seed|0)){me.x=seed}else{strseed+=seed}for(var k=0;k<strseed.length+64;k++){me.x^=strseed.charCodeAt(k)|0;if(k==strseed.length){me.d=me.x<<10^me.x>>>4}me.next()}}function copy(f,t){t.x=f.x;t.y=f.y;t.z=f.z;t.w=f.w;t.v=f.v;t.d=f.d;return t}function impl(seed,opts){var xg=new XorGen(seed),state=opts&&opts.state,prng=function prng(){return(xg.next()>>>0)/4294967296};prng["double"]=function(){do{var top=xg.next()>>>11,bot=(xg.next()>>>0)/4294967296,result=(top+bot)/(1<<21)}while(result===0);return result};prng.int32=xg.next;prng.quick=prng;if(state){if(_typeof(state)=="object")copy(state,xg);prng.state=function(){return copy(xg,{})}}return prng}if(module&&module.exports){module.exports=impl}else if(define&&define.amd){define(function(){return impl})}else{this.xorwow=impl}})(this,_typeof(module)=="object"&&module,typeof define=="function"&&define)},{}],33:[function(require,module,exports){(function(global,pool,math){var width=256,chunks=6,digits=52,rngname="random",startdenom=math.pow(width,chunks),significance=math.pow(2,digits),overflow=significance*2,mask=width-1,nodecrypto;function seedrandom(seed,options,callback){var key=[];options=options==true?{entropy:true}:options||{};var shortseed=mixkey(flatten(options.entropy?[seed,tostring(pool)]:seed==null?autoseed():seed,3),key);var arc4=new ARC4(key);var prng=function prng(){var n=arc4.g(chunks),d=startdenom,x=0;while(n<significance){n=(n+x)*width;d*=width;x=arc4.g(1)}while(n>=overflow){n/=2;d/=2;x>>>=1}return(n+x)/d};prng.int32=function(){return arc4.g(4)|0};prng.quick=function(){return arc4.g(4)/4294967296};prng["double"]=prng;mixkey(tostring(arc4.S),pool);return(options.pass||callback||function(prng,seed,is_math_call,state){if(state){if(state.S){copy(state,arc4)}prng.state=function(){return copy(arc4,{})}}if(is_math_call){math[rngname]=prng;return seed}else return prng})(prng,shortseed,"global"in options?options.global:this==math,options.state)}function ARC4(key){var t,keylen=key.length,me=this,i=0,j=me.i=me.j=0,s=me.S=[];if(!keylen){key=[keylen++]}while(i<width){s[i]=i++}for(i=0;i<width;i++){s[i]=s[j=mask&j+key[i%keylen]+(t=s[i])];s[j]=t}(me.g=function(count){var t,r=0,i=me.i,j=me.j,s=me.S;while(count--){t=s[i=mask&i+1];r=r*width+s[mask&(s[i]=s[j=mask&j+t])+(s[j]=t)]}me.i=i;me.j=j;return r})(width)}function copy(f,t){t.i=f.i;t.j=f.j;t.S=f.S.slice();return t}function flatten(obj,depth){var result=[],typ=_typeof(obj),prop;if(depth&&typ=="object"){for(prop in obj){try{result.push(flatten(obj[prop],depth-1))}catch(e){}}}return result.length?result:typ=="string"?obj:obj+"\0"}function mixkey(seed,key){var stringseed=seed+"",smear,j=0;while(j<stringseed.length){key[mask&j]=mask&(smear^=key[mask&j]*19)+stringseed.charCodeAt(j++)}return tostring(key)}function autoseed(){try{var out;if(nodecrypto&&(out=nodecrypto.randomBytes)){out=out(width)}else{out=new Uint8Array(width);(global.crypto||global.msCrypto).getRandomValues(out)}return tostring(out)}catch(e){var browser=global.navigator,plugins=browser&&browser.plugins;return[+new Date,global,plugins,global.screen,tostring(pool)]}}function tostring(a){return String.fromCharCode.apply(0,a)}mixkey(math.random(),pool);if(_typeof(module)=="object"&&module.exports){module.exports=seedrandom;try{nodecrypto=require("crypto")}catch(ex){}}else if(typeof define=="function"&&define.amd){define(function(){return seedrandom})}else{math["seed"+rngname]=seedrandom}})(typeof self!=="undefined"?self:this,[],Math)},{crypto:25}],34:[function(require,module,exports){var Util=require("./utility.js");function spreadFloat(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:len;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return function(lo,hi){if(lo>hi){var t=lo,lo=hi,hi=t}len=Math.max(1,Math.abs(len));var arr=new Array(len);for(var i=0;i<len;i++){arr[i]=i/len*(hi-lo)+lo}return arr}(lo,hi)}exports.spreadFloat=spreadFloat;exports.spreadF=spreadFloat;function spreadFloatExp(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:len;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var exp=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return function(lo,hi){if(lo>hi){var t=lo,lo=hi,hi=t}len=Math.max(1,Math.abs(len));var arr=new Array(len);for(var i=0;i<len;i++){arr[i]=Math.pow(i/len,exp)*(hi-lo)+lo}return arr}(lo,hi)}exports.spreadFloatExp=spreadFloatExp;function spread(len,lo,hi){var arr=spreadFloat(len,lo,hi);return arr.map(function(v){return Math.floor(Number(v.toPrecision(15)))})}exports.spread=spread;function spreadExp(len,lo,hi,exp){var arr=spreadFloatExp(len,lo,hi,exp);return arr.map(function(v){return Math.floor(Number(v.toPrecision(15)))})}exports.spreadExp=spreadExp;function spreadInclusiveFloat(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:len;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return function(lo,hi){if(lo>hi){var t=lo,lo=hi,hi=t}var arr=new Array(len);for(var i=0;i<len;i++){arr[i]=i/(len-1)*(hi-lo)+lo}return arr}(lo,hi)}exports.spreadInclusiveFloat=spreadInclusiveFloat;exports.spreadIncF=spreadInclusiveFloat;function spreadInclusiveFloatExp(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:len;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var exp=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return function(lo,hi){if(lo>hi){var t=lo,lo=hi,hi=t}var arr=new Array(len);for(var i=0;i<len;i++){arr[i]=Math.pow(i/(len-1),exp)*(hi-lo)+lo}return arr}(lo,hi)}exports.spreadInclusiveFloatExp=spreadInclusiveFloatExp;function spreadInclusive(len,lo,hi){var arr=spreadInclusiveFloat(len,lo,hi);return arr.map(function(v){return Math.floor(Number(v.toPrecision(15)))})}exports.spreadInclusive=spreadInclusive;exports.spreadInc=spreadInclusive;function spreadInclusiveExp(len,lo,hi,exp){var arr=spreadInclusiveFloatExp(len,lo,hi,exp);return arr.map(function(v){return Math.floor(Number(v.toPrecision(15)))})}exports.spreadInclusiveExp=spreadInclusiveExp;function fill(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}if(!args.length){return[0]}if(args.length%2){args.pop()}var arr=[];for(var i=0;i<args.length/2;i++){for(var k=0;k<Math.abs(args[i*2+1]);k++){arr.push(args[i*2])}}return arr}exports.fill=fill;function sineFloat(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var periods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var lo=arguments.length>2?arguments[2]:undefined;var hi=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var phase=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;return function(lo,hi){if(lo===undefined){lo=-1;hi=1}if(lo>hi){var t=lo,lo=hi,hi=t}len=Math.max(1,len);var arr=new Array(len);var a=Math.PI*2*periods/len;var p=Math.PI*phase;for(var i=0;i<len;i++){arr[i]=Math.sin(a*i+p)}return Util.map(arr,-1,1,lo,hi)}(lo,hi)}exports.sineFloat=sineFloat;exports.sin=sineFloat;function sine(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var periods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var lo=arguments.length>2&&arguments[2]!==undefined?arguments[2]:12;var hi=arguments.length>3?arguments[3]:undefined;var phase=arguments.length>4?arguments[4]:undefined;var arr=sineFloat(len,periods,lo,hi,phase);return arr.map(function(v){return Math.trunc(v)})}exports.sine=sine;function cosineFloat(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var periods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var lo=arguments.length>2?arguments[2]:undefined;var hi=arguments.length>3?arguments[3]:undefined;var phase=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;return sineFloat(len,periods,lo,hi,phase+.5)}exports.cosineFloat=cosineFloat;exports.cos=cosineFloat;function cosine(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var periods=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var lo=arguments.length>2&&arguments[2]!==undefined?arguments[2]:12;var hi=arguments.length>3?arguments[3]:undefined;var phase=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var arr=sineFloat(len,periods,lo,hi,phase+.5);return arr.map(function(v){return Math.trunc(v)})}exports.cosine=cosine},{"./utility.js":40}],35:[function(require,module,exports){var Transform=require("./transform.js");var BigNumber=require("bignumber.js");BigNumber.config({DECIMAL_PLACES:20,EXPONENTIAL_AT:[-7,20]});function hexBeat(){var hex=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"8";if(!hex.isNaN){hex=hex.toString()}var a=[];for(var i in hex){var binary=parseInt("0x"+hex[i]).toString(2);binary=isNaN(binary)?"0000":binary;var padding=binary.padStart(4,"0");a=a.concat(padding.split("").map(function(x){return Number(x)}))}return a}exports.hexBeat=hexBeat;var pattern,counts,remainders;function euclid(){var steps=arguments.length>0&&arguments[0]!==undefined?arguments[0]:8;var beats=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var rot=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;pattern=[];counts=[];remainders=[];var level=0;var divisor=steps-beats;remainders.push(beats);while(remainders[level]>1){counts.push(Math.floor(divisor/remainders[level]));remainders.push(divisor%remainders[level]);divisor=remainders[level];level++}counts.push(divisor);build(level);return Transform.rotate(pattern,rot-pattern.indexOf(1))}exports.euclid=euclid;function build(l){var level=l;if(level==-1){pattern.push(0)}else if(level==-2){pattern.push(1)}else{for(var i=0;i<counts[level];i++){build(level-1)}if(remainders[level]!=0){build(level-2)}}}function linden(){var axiom=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[1];var iteration=arguments.length>1&&arguments[1]!==undefined?arguments[1]:3;var rules=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{1:[1,0],0:[1]};axiom=typeof axiom==="number"?[axiom]:axiom;var asString=typeof axiom==="string";var res;for(var n=0;n<iteration;n++){res=asString?"":[];for(var ch in axiom){var _char=axiom[ch];var rule=rules[_char];if(rule){res=asString?res+rule:res.concat(rule)}else{res=asString?res+_char:res.concat(_char)}}axiom=res}return res}exports.linden=linden;function numBonacci(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var s1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s2=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var t=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;var n1=new BigNumber(s2);var n2=new BigNumber(s1);len=Math.max(1,len-2);var cur=0,arr=[n2,n1];if(len<2){return arr.slice(0,len)}else{for(var i=0;i<len;i++){cur=n1.times(t).plus(n2);n2=n1;n1=cur;arr.push(cur)}return arr}}function nbonacci(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var s1=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var s2=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var t=arguments.length>3&&arguments[3]!==undefined?arguments[3]:1;return numBonacci(len,s1,s2,t).map(function(x){return x.toFixed()})}exports.nbonacci=nbonacci;function fibonacci(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var f=numBonacci(len+offset,0,1,1).map(function(x){return x.toFixed()});if(offset>0){return f.slice(offset,offset+len)}return f}exports.fibonacci=fibonacci;function pisano(){var mod=arguments.length>0&&arguments[0]!==undefined?arguments[0]:12;var len=arguments.length>1&&arguments[1]!==undefined?arguments[1]:-1;if(mod<2){return[0]}if(len<1){return pisanoPeriod(mod)}else{return numBonacci(len,0,1,1).map(function(x){return x.mod(mod).toNumber()})}}exports.pisano=pisano;function pisanoPeriod(){var mod=arguments.length>0&&arguments[0]!==undefined?arguments[0]:2;var length=arguments.length>1&&arguments[1]!==undefined?arguments[1]:64;var seq=numBonacci(length,0,1,1).map(function(x){return x.mod(mod).toNumber()});var p=[],l=0;for(var i=0;i<seq.length;i++){p.push(seq[i]);if(p.length>2){var c=[0,1,1];var equals=0;for(var k in p){equals+=p[k]===c[k]}if(equals===3&&l>3){return seq.slice(0,l)}p=p.slice(1,3);l++}}return pisanoPeriod(mod,length*2)}function pell(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return numBonacci(len,0,1,2).map(function(x){return x.toFixed()})}exports.pell=pell;function threeFibonacci(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return numBonacci(len,0,1,3).map(function(x){return x.toFixed()})}exports.threeFibonacci=threeFibonacci;function lucas(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;return numBonacci(len,2,1,1).map(function(x){return x.toFixed()})}exports.lucas=lucas},{"./transform.js":38,"bignumber.js":24}],36:[function(require,module,exports){var Gen=require("./gen-basic.js");var seedrandom=require("seedrandom");var rng=seedrandom();function seed(){var v=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;if(v===0||v===null||v===undefined){rng=seedrandom()}else{rng=seedrandom(v)}}exports.seed=seed;function randomFloat(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return function(lo,hi){if(lo>hi){var t=lo,lo=hi,hi=t}len=Math.max(1,Math.abs(len));var arr=new Array(len);for(var i=0;i<len;i++){arr[i]=rng()*(hi-lo)+lo}return arr}(lo,hi)}exports.randomFloat=randomFloat;exports.randomF=randomFloat;function random(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var lo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var hi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;var arr=randomFloat(len,lo,hi);return arr.map(function(v){return Math.floor(v)})}exports.random=random;function coin(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var arr=randomFloat(len,0,2);return arr.map(function(v){return Math.floor(v)})}exports.coin=coin;function dice(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var sides=arguments.length>1&&arguments[1]!==undefined?arguments[1]:6;var arr=randomFloat(len,1,sides+1);return arr.map(function(v){return Math.floor(v)})}exports.dice=dice;function shuffle(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var arr=a.slice();for(var i=arr.length-1;i>0;i-=1){var j=Math.floor(rng()*(i+1));var t=arr[i];arr[i]=arr[j];arr[j]=t}return arr}exports.shuffle=shuffle;function twelveTone(){return shuffle(Gen.spread(12))}exports.twelveTone=twelveTone;function urn(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var hi=arguments.length>1&&arguments[1]!==undefined?arguments[1]:12;var lo=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;return function(hi,lo){if(lo>hi){var t=lo,lo=hi,hi=t}return pick(len,Gen.spread(hi-lo,lo,hi))}(hi,lo)}exports.urn=urn;function choose(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,1];a=!Array.isArray(a)?[a]:a;var arr=[];for(var i=0;i<Math.max(1,len);i++){arr.push(a[Math.floor(rng()*a.length)])}return arr}exports.choose=choose;function pick(){var len=arguments.length>0&&arguments[0]!==undefined?arguments[0]:1;var a=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0,1];var jar=!Array.isArray(a)?[a]:a;var s=shuffle(jar);var v,p,arr=[];for(var i=0;i<Math.max(1,len);i++){v=s.pop();if(v===undefined){s=shuffle(jar);v=s.pop();if(v===p){v=s.pop();s.push(p)}}arr[i]=v;p=v}return arr}exports.pick=pick;var MarkovChain=function(){function MarkovChain(data){_classCallCheck(this,MarkovChain);this._table={};if(data){this.train(data)}this._state;this.rng=seedrandom()}_createClass(MarkovChain,[{key:"clear",value:function clear(){this._table={}}},{key:"train",value:function train(a){if(!Array.isArray(a)){return console.error("Error: train() expected array but received:",_typeof(a))}for(var i=1;i<a.length;i++){if(!this._table[a[i-1]]){this._table[a[i-1]]=[a[i]]}else{this._table[a[i-1]].push(a[i])}}}},{key:"seed",value:function seed(s){if(s===0||s===null||s===undefined){rng=seedrandom()}else{rng=seedrandom(s)}}},{key:"state",value:function state(a){if(!this._table[a]){console.error("Warning: state() value is not part of transition table")}this._state=a}},{key:"next",value:function next(){if(this._state===undefined||!this._table[this._state]){var states=Object.keys(this._table);this._state=states[Math.floor(rng()*states.length)]}var probs=this._table[this._state];this._state=probs[Math.floor(rng()*probs.length)];return this._state}},{key:"chain",value:function chain(l){var c=[];for(var i=0;i<l;i++){c.push(this.next())}return c}},{key:"table",get:function get(){return _objectSpread({},this._table)}}]);return MarkovChain}();exports.MarkovChain=MarkovChain},{"./gen-basic.js":34,seedrandom:26}],37:[function(require,module,exports){var Mod=require("./transform");function sort(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:1;if(!Array.isArray(a)){return a}var arr;if(a.map(function(x){return _typeof(x)}).includes("string")){arr=a.slice().sort()}else{arr=a.slice().sort(function(a,b){return a-b})}if(d<0){return arr.reverse()}return arr}exports.sort=sort;function maximum(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a)){return a}var m=-Infinity;for(var i in a){m=a[i]>Number(m)?a[i]:m}return m}exports.maximum=maximum;exports.max=maximum;function minimum(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a)){return a}var m=Infinity;for(var i in a){m=a[i]<Number(m)?a[i]:m}return m}exports.minimum=minimum;exports.min=minimum;function mean(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a)){return a}var s=0;for(var i in a){s+=a[i]}return s/a.length}exports.mean=mean;exports.average=mean;function median(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a)){return a}var arr=a.slice();if(arr.map(function(x){return _typeof(x)}).includes("string")){arr=Mod.filterType(arr,["number","boolean"])}arr=arr.sort(function(a,b){return a-b});var c=Math.floor(arr.length/2);if(!(arr.length%2)){return(arr[c]+arr[c-1])/2}return arr[c]}exports.median=median;exports.center=median;function mode(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a)){return a}var arr=a.slice().sort(function(a,b){return a-b});var amount=1;var streak=0;var modes=[];for(var i=1;i<arr.length;i++){if(arr[i-1]!=arr[i]){amount=0}amount++;if(amount>streak){streak=amount;modes=[arr[i]]}else if(amount==streak){modes.push(arr[i])}}return modes}exports.mode=mode;exports.common=mode},{"./transform":38}],38:[function(require,module,exports){var Stat=require("./statistic");var Util=require("./utility");function clone(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];for(var _len2=arguments.length,c=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++){c[_key2-1]=arguments[_key2]}if(!c.length){c=[0,0]}var arr=[];for(var i=0;i<c.length;i++){arr=arr.concat(a.map(function(v){return v+c[i]}))}return arr}exports.clone=clone;function combine(){if(!arguments.length){return[0]}var arr=[];for(var i=0;i<arguments.length;i++){arr=arr.concat(i<0||arguments.length<=i?undefined:arguments[i])}return arr}exports.combine=combine;exports.join=combine;function duplicate(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var d=arguments.length>1&&arguments[1]!==undefined?arguments[1]:2;var arr=[];for(var i=0;i<Math.max(1,d);i++){arr=arr.concat(a)}return arr}exports.duplicate=duplicate;exports.copy=duplicate;function every(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var bars=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;var div=arguments.length>2&&arguments[2]!==undefined?arguments[2]:16;var shift=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var len=Math.floor(bars*div)-a.length;if(len<1){return a}else{var arr=new Array(len).fill(0);return rotate(a.concat(arr),Math.floor(shift*div))}}exports.every=every;function filter(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var f=arguments.length>1?arguments[1]:undefined;var arr=Array.isArray(a)?a.slice():[a];f=Array.isArray(f)?f:[f];for(var i in f){var index=arr.indexOf(f[i]);while(index>=0){arr.splice(index,1);index=arr.indexOf(f[i])}}return arr}exports.filter=filter;function filterType(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var t=arguments.length>1?arguments[1]:undefined;a=Array.isArray(a)?a.slice():[a];t=Array.isArray(t)?t:[t];var types=a.map(function(x){return _typeof(x)});var arr=[];for(var i in t){var index=types.indexOf(t[i]);while(index>=0){arr.push(a[index]);a.splice(index,1);types.splice(index,1);index=types.indexOf(t[i])}}return arr}exports.filterType=filterType;function invert(){var arr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var lo=arguments.length>1?arguments[1]:undefined;var hi=arguments.length>2?arguments[2]:undefined;if(lo===undefined){hi=Math.max.apply(Math,_toConsumableArray(arr));lo=Math.min.apply(Math,_toConsumableArray(arr))}else if(hi===undefined){hi=lo}return arr.slice().map(function(v){return hi-v+lo})}exports.invert=invert;function lace(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}if(!args.length){return[0]}var l=0;for(var _i2 in args){l=Math.max(args[_i2].length,l)}var arr=[];for(var i=0;i<l;i++){for(var k in args){var v=args[k][i];if(v!=undefined){arr.push(v)}}}return arr}exports.lace=lace;function merge(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++){args[_key4]=arguments[_key4]}if(!args.length){return[0]}var l=0;for(var _i3 in args){l=Math.max(args[_i3].length,l)}var arr=[];for(var i=0;i<l;i++){var a=[];for(var k in args){var v=args[k][i];if(v!=undefined){a.push(v)}}arr[i]=a}return arr}exports.merge=merge;function palindrome(){var arr=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var noDouble=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;var rev=arr.slice().reverse();if(noDouble){rev=rev.slice(1,rev.length-1)}return arr.concat(rev)}exports.palindrome=palindrome;exports.mirror=palindrome;function reverse(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];return a.slice().reverse()}exports.reverse=reverse;function rotate(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var r=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var l=a.length;var arr=[];for(var i=0;i<l;i++){arr[i]=a[Util.mod(i-r,l)]}return arr}exports.rotate=rotate;exports.sort=Stat.sort;function spray(){var values=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var beats=arguments.length>1&&arguments[1]!==undefined?arguments[1]:[0];var arr=beats.slice();var c=0;for(var i in beats){if(beats[i]>0){arr[i]=values[c++%values.length]}}return arr}exports.spray=spray;function unique(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];return _toConsumableArray(new Set(a))}exports.unique=unique},{"./statistic":37,"./utility":40}],39:[function(require,module,exports){var _require=require("@tonaljs/tonal"),Note=_require.Note;var Scales=require("../data/scales.json");var ToneSet=require("../data/tones.json");var notation={scale:"chromatic",root:"c",rootInt:0,map:Scales["chromatic"],bpm:120,measureInMs:2e3};function getSettings(){return _objectSpread({},notation)}exports.getSettings=getSettings;function setTempo(){var t=arguments.length>0&&arguments[0]!==undefined?arguments[0]:100;if(Array.isArray(t)){t=t[0]}notation.bpm=Math.max(1,Number(t));notation.measureInMs=6e4/notation.bpm*4}exports.setTempo=setTempo;exports.setBPM=setTempo;function getTempo(){return getSettings().bpm}exports.getTempo=getTempo;exports.getBPM=getTempo;function setScale(){var s=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"chromatic";var r=arguments.length>1?arguments[1]:undefined;if(Scales[s]){notation.scale=s;if(r!==undefined){setRoot(r)}notation.map=Scales[s]}}exports.setScale=setScale;function getScale(){return{scale:getSettings().scale,root:getSettings().root,rootInt:getSettings().rootInt}}exports.getScale=getScale;function setRoot(){var r=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"c";if(!isNaN(Number(r))){notation.rootInt=Math.floor(r);notation.root=Note.pitchClass(Note.fromMidi(notation.rootInt))}else if(r in ToneSet){notation.rootInt=ToneSet[r];notation.root=r}else{console.log("not a valid root")}}exports.setRoot=setRoot;function getRoot(){return{root:getSettings().root,rootInt:getSettings().rootInt}}exports.getRoot=getRoot;function scaleNames(){return Object.keys(Scales)}exports.scaleNames=scaleNames;function midiToNote(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:48;if(!Array.isArray(a)){return Note.fromMidi(a)}return a.map(function(x){return Note.fromMidi(x)})}exports.midiToNote=midiToNote;exports.mton=midiToNote;function midiToFreq(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:48;if(!Array.isArray(a)){return Note.freq(Note.fromMidi(a))}return a.map(function(x){return Note.freq(Note.fromMidi(x))})}exports.midiToFreq=midiToFreq;exports.mtof=midiToFreq;function noteToMidi(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"c4";if(!Array.isArray(a)){return Note.midi(a)}return a.map(function(x){return Note.midi(x)})}exports.noteToMidi=noteToMidi;exports.ntom=noteToMidi;function noteToFreq(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:"c4";if(!Array.isArray(a)){return Note.freq(a)}return a.map(function(x){return Note.freq(x)})}exports.noteToFreq=noteToFreq;exports.ntof=noteToFreq;function relativeToMidi(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;o=typeof o==="string"?Note.midi(o):o*12;if(!Array.isArray(a)){return a+o}return a.map(function(x){return x+o})}exports.relativeToMidi=relativeToMidi;exports.rtom=relativeToMidi;function relativeToFreq(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:0;var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;o=typeof o==="string"?Note.midi(o):o*12;if(!Array.isArray(a)){console.log(Note.freq(Note.fromMidi(a+o)));return Note.freq(a+o)}return a.map(function(x){return Note.freq(Note.fromMidi(x+o))})}exports.relativeToFreq=relativeToFreq;exports.rtof=relativeToFreq;function mapToScale(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];if(!Array.isArray(a))return mapScale(a);return a.map(function(x){return mapScale(x)})}exports.mapToScale=mapToScale;exports.toScale=mapToScale;function mapScale(a){var d=a-Math.floor(a);var s=Math.floor((a%12+12)%12);var o=Math.floor(a/12);return notation.map[s]+o*12+d}function mapToMidi(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var o=arguments.length>1&&arguments[1]!==undefined?arguments[1]:4;o=typeof o==="string"?Note.midi(o):o*12+notation.rootInt;if(!Array.isArray(a))return a+o;return a.map(function(x){return mapScale(x)+o})}exports.mapToMidi=mapToMidi;exports.toMidi=mapToMidi;function divisionToMs(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["1"];var bpm=arguments.length>1?arguments[1]:undefined;var measureMs=notation.measureInMs;if(bpm!==undefined){measureMs=6e4/Math.max(1,Number(bpm))*4}var v=!Array.isArray(a)?[a]:a;return v.map(function(x){var d=/^\d+(\/\d+)?$/;x=typeof x==="string"&&d.test(x)?eval(x):x;return x*measureMs})}exports.divisionToMs=divisionToMs;exports.dtoms=divisionToMs;function divisionToRatio(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:["1"];var v=!Array.isArray(a)?[a]:a;return v.map(function(x){var d=/^\d+(\/\d+)?$/;return typeof x==="string"&&d.test(x)?eval(x):x})}exports.divisionToRatio=divisionToRatio;exports.dtor=divisionToRatio},{"../data/scales.json":1,"../data/tones.json":2,"@tonaljs/tonal":23}],40:[function(require,module,exports){function mod(a,mod){if(!Array.isArray(a)){return(a%mod+mod)%mod}return a.map(function(x){return(x%mod+mod)%mod})}exports.mod=mod;function constrain(a,min,max){if(!Array.isArray(a)){return Math.min(max,Math.max(min,a))}return a.map(function(x){return Math.min(max,Math.max(min,x))})}exports.constrain=constrain;exports.bound=constrain;function map(a){for(var _len5=arguments.length,params=new Array(_len5>1?_len5-1:0),_key5=1;_key5<_len5;_key5++){params[_key5-1]=arguments[_key5]}if(!Array.isArray(a)){return _map.apply(void 0,[a].concat(params))}return a.map(function(x){return _map.apply(void 0,[x].concat(params))})}exports.map=map;function _map(a){var inLo=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var inHi=arguments.length>2&&arguments[2]!==undefined?arguments[2]:1;var outLo=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0;var outHi=arguments.length>4&&arguments[4]!==undefined?arguments[4]:1;var exp=arguments.length>5&&arguments[5]!==undefined?arguments[5]:1;a=(a-inLo)/(inHi-inLo);if(exp!=1){var sign=a>=0?1:-1;a=Math.pow(Math.abs(a),exp)*sign}return a*(outHi-outLo)+outLo}function add(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(a)){return a+v}if(Array.isArray(v)){for(var i in a){a[i]=a[i]+v[i%v.length]}return a}return a.map(function(x){return x+v})}exports.add=add;function subtract(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(a)){return a-v}if(Array.isArray(v)){for(var i in a){a[i]=a[i]-v[i%v.length]}return a}return a.map(function(x){return x-v})}exports.subtract=subtract;exports.sub=subtract;function multiply(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(a)){return a*v}if(Array.isArray(v)){for(var i in a){a[i]=a[i]*v[i%v.length]}return a}return a.map(function(x){return x*v})}exports.multiply=multiply;exports.mul=multiply;function divide(){var a=arguments.length>0&&arguments[0]!==undefined?arguments[0]:[0];var v=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;if(!Array.isArray(a)){return a/v}if(Array.isArray(v)){for(var i in a){a[i]=a[i]/v[i%v.length]}return a}return a.map(function(x){return x/v})}exports.divide=divide;exports.div=divide},{}]},{},[3])(3)});